<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Chapter 4. Advanced Spring Configuration and Spring Boot</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Chapter 4. Advanced Spring Configuration and Spring Boot</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_springs_impact_on_application_portability">Spring’s Impact on Application Portability</a></li>
<li><a href="#_bean_life_cycle_management">Bean Life-Cycle Management</a></li>
<li><a href="#_hooking_into_bean_creation">Hooking into Bean Creation</a>
<ul class="sectlevel2">
<li><a href="#_executing_a_method_when_a_bean_is_created">Executing a Method When a Bean Is Created</a></li>
<li><a href="#_implementing_the_initializingbean_interface">Implementing the InitializingBean Interface</a></li>
<li><a href="#_using_the_jsr_250_postconstruct_annotation">Using the JSR-250 @PostConstruct Annotation</a></li>
<li><a href="#_understanding_order_of_resolution">Understanding Order of Resolution</a></li>
</ul>
</li>
<li><a href="#_making_your_beans_spring_aware">Making Your Beans “Spring Aware”</a>
<ul class="sectlevel2">
<li><a href="#_using_the_beannameaware_interface">Using the BeanNameAware Interface</a></li>
<li><a href="#_using_the_applicationcontextaware_interface">Using the ApplicationContextAware Interface</a></li>
</ul>
</li>
<li><a href="#_use_of_factorybeans">Use of FactoryBeans</a>
<ul class="sectlevel2">
<li><a href="#_factorybean_example_the_messagedigestfactorybean">FactoryBean Example - The MessageDigestFactoryBean</a></li>
<li><a href="#_accessing_a_factorybean_directly">Accessing a FactoryBean Directly</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="pro_spring_6.html">&lt;Contents&gt;</a></p>
</div>
<hr>
<div class="paragraph">
<p>This chapter delves deeper into Spring Core&#8217;s capabilities beyond basic Inversion of Control (IoC), exploring various services that supplement and extend its core functionalities.</p>
</div>
<div class="paragraph">
<p>Specifically, it will cover:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Managing the bean life cycle</strong>: Strategies for beans to receive notifications from the Spring container at different life cycle points, using interfaces, reflection, or JavaBeans annotations.</p>
</li>
<li>
<p><strong>Making beans "Spring aware"</strong>: How beans can interact with their <code>ApplicationContext</code> instance using interfaces like <code>BeanNameAware</code> and <code>ApplicationContextAware</code>.</p>
</li>
<li>
<p><strong>Using FactoryBeans</strong>: Implementing beans that act as factories for other beans, integrating with the Spring <code>BeanFactory</code>.</p>
</li>
<li>
<p><strong>Working with JavaBeans PropertyEditor implementations</strong>: Understanding how Spring uses <code>PropertyEditors</code> for type conversion, including supplied and custom implementations.</p>
</li>
<li>
<p><strong>Learning more about the Spring ApplicationContext</strong>: A detailed look at `ApplicationContext&#8217;s additional features beyond IoC, such as internationalized message support, resource loading, and event publishing, including its use in web applications.</p>
</li>
<li>
<p><strong>Testing Spring applications</strong>: Methods for creating Spring test contexts to effectively test Spring applications.</p>
</li>
<li>
<p><strong>Using Spring Boot</strong>: How Spring Boot simplifies the creation of stand-alone, production-grade Spring applications.</p>
</li>
<li>
<p><strong>Using configuration enhancements</strong>: Features like profile management and environment/property source abstraction to streamline application configuration.</p>
</li>
<li>
<p><strong>Using Groovy for configuration</strong>: Exploring Groovy as an alternative or supplement to XML and Java-based bean configuration.</p>
</li>
</ul>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>What are the three distinct strategies presented in this chapter for enabling Spring beans to receive notifications from the container at various points throughout their life cycles?</p>
</li>
<li>
<p>Which two specific interfaces does Spring offer to make a bean "Spring aware" by allowing it to obtain its assigned name and reference its <code>ApplicationContext</code> instance, as discussed in this chapter?</p>
</li>
<li>
<p>According to this chapter, which specific Spring version introduced the ability to configure bean definitions using the Groovy language, and how is this approach positioned as an alternative or supplement to existing configuration styles?</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_springs_impact_on_application_portability">Spring’s Impact on Application Portability</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The text discusses the trade-off between using Spring-specific features and ensuring application portability across different IoC containers. While avoiding Spring-specific features might seem to enhance portability, it means sacrificing the extensive functionality Spring offers.</p>
</div>
<div class="paragraph">
<p>The author advises against creating unnecessary portability requirements, as end-users typically prioritize functionality over the ability to run on multiple IoC containers, and building on the "lowest common denominator" can disadvantage an application.</p>
</div>
<div class="paragraph">
<p>However, the text argues that coupling an application to Spring can paradoxically <strong>increase</strong> its portability in a wider scope. As a freely available, open-source, vendor-agnostic framework, Spring allows applications to run wherever Java runs. It provides capabilities similar to JEE and simplifies many aspects of it, enabling sophisticated web applications to run in simpler servlet containers by replacing vendor-specific or configuration-dependent JEE features with Spring&#8217;s equivalents.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>According to the text, what is the primary trade-off when prioritizing application portability between different IoC containers over using Spring-specific features?</p>
</li>
<li>
<p>Which specific book is cited in the text as providing a more detailed discussion on "phantom requirements" related to project development?</p>
</li>
<li>
<p>In what ways does the text argue that coupling an application to the Spring Framework can actually <strong>increase</strong> its portability in a wider scope, despite being specific to Spring?</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bean_life_cycle_management">Bean Life-Cycle Management</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring IoC containers, including Spring, allow beans to receive notifications at specific points in their lifecycle to perform relevant processing. The two key events are <strong>post-initialization</strong> and <strong>pre-destruction</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Post-initialization</strong> occurs after Spring has set all property values and completed any configured dependency checks.</p>
</li>
<li>
<p><strong>Pre-destruction</strong> is fired just before Spring destroys the bean instance.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A notable exception is that beans with <strong>prototype scope</strong> will <strong>not</strong> receive the pre-destruction event, although they do receive post-initialization notifications.</p>
</div>
<div class="paragraph">
<p>Spring provides three mechanisms for beans to hook into these lifecycle events:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Interface-based mechanism:</strong> The bean implements a Spring-specific interface (e.g., <code>InitializingBean</code>, <code>DisposableBean</code>), and Spring invokes a defined callback method.</p>
</li>
<li>
<p><strong>Method-based mechanism:</strong> You specify the names of initialization and destruction methods in your <code>ApplicationContext</code> configuration.</p>
</li>
<li>
<p><strong>Annotation-based mechanism:</strong> You use JSR-250 annotations (<code>@PostConstruct</code> for post-initialization, <code>@PreDestroy</code> for pre-destruction) on methods within the bean class.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>While all three achieve the same goal, the choice depends on application requirements. Interface-based mechanisms are widely used within Spring itself and can be convenient for many beans of the same type or when coupling to Spring is already present. However, for your own beans, method-based or annotation-based (especially JSR-250, which is a standard) approaches offer better portability as they don&#8217;t require implementing Spring-specific interfaces. If a bean is intended to be self-contained and used across different Spring projects, the interface-based mechanism is recommended. When using annotations, ensure your IoC container supports the JSR-250 standard.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>What is the specific exception regarding pre-destruction life-cycle events for beans with prototype scope in Spring?</p>
</li>
<li>
<p>According to the text, what are the specific scenarios or application requirements that would lead a developer to choose the interface-based mechanism over method-based or annotation-based mechanisms for Spring bean life-cycle notifications?</p>
</li>
<li>
<p>What is a key advantage of using JSR-250 annotations for Spring bean life-cycle callbacks compared to Spring&#8217;s interface-based mechanism, and what is a prerequisite for using them?</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hooking_into_bean_creation">Hooking into Bean Creation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring bean initialization callbacks allow a bean to verify if all its required dependencies are met and apply custom logic to dependency resolution, such as providing defaults for optional dependencies. This is crucial because Spring&#8217;s automatic dependency checking is an all-or-nothing approach.</p>
</div>
<div class="paragraph">
<p>These callbacks are invoked <strong>after</strong> Spring has finished injecting all possible dependencies, making them suitable for checks that cannot be performed in the constructor (as dependencies aren&#8217;t available yet). Beyond dependency validation, initialization callbacks are also ideal for triggering actions that a bean must perform automatically based on its configuration, such as starting a scheduler.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Beyond Spring&#8217;s all-or-nothing dependency checking, what specific opportunities does an initialization callback offer for applying custom logic to dependency resolution, such as handling optional dependencies with defaults?</p>
</li>
<li>
<p>Why is a bean&#8217;s constructor an unsuitable place to verify if all its required dependencies are satisfied, and when does Spring&#8217;s initialization callback execute to make such checks feasible?</p>
</li>
<li>
<p>In addition to validating dependencies, what other primary purpose does Spring&#8217;s initialization callback serve, especially regarding a bean&#8217;s automatic actions triggered by its configuration?</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_executing_a_method_when_a_bean_is_created">Executing a Method When a Bean Is Created</h3>
<div class="exampleblock">
<div class="content">
<a href="https://github.com/Apress/pro-spring-6/blob/main/chapter04/src/main/java/com/apress/prospring6/four/initmethod/InitMethodDemo.java" target="_blank">
chapter04/src/main/java/com/apress/prospring6/four/initmethod/InitMethodDemo.java</a>
</div>
</div>
<div class="paragraph">
<p>Spring allows you to define an initialization method for a bean, which is invoked after the bean&#8217;s properties have been set. This callback mechanism is beneficial for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Decoupling your application from Spring.</p>
</li>
<li>
<p>Integrating pre-built or third-party beans.</p>
</li>
<li>
<p>Managing a small number of similar beans.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To designate an initialization method, you specify its name using the <code>initMethod</code> attribute within the <code>@Bean</code> annotation in Java configuration classes.</p>
</div>
<div class="paragraph">
<p>The provided example demonstrates this with a <code>Singer</code> bean that includes an <code>init()</code> method. This <code>init()</code> method performs validation and sets default values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the <code>name</code> property is null, it assigns a <code>DEFAULT_NAME</code>.</p>
</li>
<li>
<p>If the <code>age</code> property is not set (i.e., <code>Integer.MIN_VALUE</code>), it throws an <code>IllegalArgumentException</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the <code>SingerConfiguration</code>, three <code>Singer</code> beans are defined, all using <code>init()</code> as their initialization method:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong><code>singerOne</code></strong>: Has both <code>name</code> and <code>age</code> set, so <code>init()</code> makes no changes.</p>
</li>
<li>
<p><strong><code>singerTwo</code></strong>: Lacks a <code>name</code>, so <code>init()</code> assigns the <code>DEFAULT_NAME</code>.</p>
</li>
<li>
<p><strong><code>singerThree</code></strong>: Lacks an <code>age</code>, causing <code>init()</code> to throw an <code>IllegalArgumentException</code>, which Spring wraps in a <code>BeanCreationException</code>, preventing the bean&#8217;s creation.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This approach ensures that beans are correctly configured and validated before they are used. The initialization method must not accept any arguments, though its return type is ignored. While static initialization methods are possible, non-static methods are generally preferred for validating instance-specific state.</p>
</div>
<hr>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>According to the <code>Singer</code> class&#8217;s <code>init()</code> method, what specific actions are taken if the <code>name</code> property is <code>null</code> or if the <code>age</code> property is <code>Integer.MIN_VALUE</code> during bean initialization?</p>
</li>
<li>
<p>When the <code>singerThree</code> bean is processed by Spring, as configured in <code>Listing 4-2</code>, what is the specific reason for its failure, and what type of exception does Spring wrap the underlying error in?</p>
</li>
<li>
<p>What is the primary constraint on an initialization method designated via the <code>initMethod</code> attribute in the <code>@Bean</code> annotation, and why is using a static initialization method generally discouraged for validating a bean&#8217;s state?</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_implementing_the_initializingbean_interface">Implementing the InitializingBean Interface</h3>
<div class="exampleblock">
<div class="content">
<a href="https://github.com/Apress/pro-spring-6/blob/main/chapter04/src/main/java/com/apress/prospring6/four/intf/InitializingBeanDemo.java" target="_blank">
chapter04/src/main/java/com/apress/prospring6/four/intf/InitializingBeanDemo.java</a>
<hr>
<a href="https://github.com/Apress/pro-spring-6/blob/main/chapter04/src/main/java/com/apress/prospring6/four/intf/DisposableBeanDemo.java" target="_blank">
chapter04/src/main/java/com/apress/prospring6/four/intf/DisposableBeanDemo.java</a>
</div>
</div>
<div class="paragraph">
<p>The <code>InitializingBean</code> interface in Spring allows developers to execute custom code within a bean immediately after Spring has finished configuring it. This interface defines a single method, <code>afterPropertiesSet()</code>, which serves the same purpose as a traditional initialization method.</p>
</div>
<div class="paragraph">
<p>This post-configuration hook is useful for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Validating</strong> the bean&#8217;s configuration to ensure it&#8217;s in a valid state.</p>
</li>
<li>
<p><strong>Providing default values</strong> for properties if they haven&#8217;t been explicitly set.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The provided example demonstrates a <code>Singer</code> class implementing <code>InitializingBean</code>. Its <code>afterPropertiesSet()</code> method checks if the <code>name</code> property is null and sets a default if so, and it throws an <code>IllegalArgumentException</code> if the <code>age</code> property is not set. Using <code>InitializingBean</code> eliminates the need to specify an <code>initMethod</code> attribute in the bean&#8217;s configuration, yielding identical results to the <code>initMethod</code> approach.</p>
</div>
<hr>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>According to the <code>Singer</code> class implementation in Listing 4-4, what specific exception is thrown if the <code>age</code> property is not set for a <code>Singer</code> bean?</p>
</li>
<li>
<p>What is the default <code>name</code> value assigned to a <code>Singer</code> bean by its <code>afterPropertiesSet()</code> method if no name is explicitly provided?</p>
</li>
<li>
<p>How does the <code>afterPropertiesSet()</code> method in the <code>Singer</code> class (Listing 4-4) handle the <code>name</code> and <code>age</code> properties to ensure valid configuration?</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_using_the_jsr_250_postconstruct_annotation">Using the JSR-250 @PostConstruct Annotation</h3>
<div class="exampleblock">
<div class="content">
<a href="https://github.com/Apress/pro-spring-6/blob/main/chapter04/src/main/java/com/apress/prospring6/four/jsr250/PostConstructDemo.java" target="_blank">
chapter04/src/main/java/com/apress/prospring6/four/jsr250/PostConstructDemo.java</a>
</div>
</div>
<div class="paragraph">
<p>JSR-250 annotations, specifically <code>@PostConstruct</code>, are supported by
Spring (starting from version 2.5) to define bean lifecycle
initialization methods.</p>
</div>
<div class="paragraph">
<p><strong>Key Points:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Purpose:</strong> <code>@PostConstruct</code> marks a method that Spring should call
after a bean&#8217;s properties have been set but before the bean is fully
ready for use.</p>
</li>
<li>
<p><strong>Example (<code>Singer</code> class):</strong> The provided <code>Singer</code> class uses
<code>@PostConstruct</code> on a <code>postConstruct()</code> method to perform
initialization logic, such as setting a default name or validating the
<code>age</code> property.</p>
</li>
<li>
<p><strong>Alternatives:</strong> <code>@PostConstruct</code> is an alternative to:</p>
<div class="ulist">
<ul>
<li>
<p>Using <code>initMethod</code> attribute with <code>@Bean</code> (e.g.,
<code>@Bean(initMethod="myInitMethod")</code>).</p>
</li>
<li>
<p>Implementing the <code>InitializingBean</code> interface.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Method Naming:</strong> The method annotated with <code>@PostConstruct</code> can have
any name (e.g., <code>postConstruct</code> is just a convention).</p>
</li>
<li>
<p><strong>Comparison of Approaches:</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong><code>@Bean(initMethod=..)</code>:</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Benefit:</strong> Decouples application from Spring.</p>
</li>
<li>
<p><strong>Drawback:</strong> Requires configuring the initialization method for
<em>each</em> bean.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><code>InitializingBean</code> interface:</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Benefit:</strong> Specifies initialization callback once for all instances
of a class.</p>
</li>
<li>
<p><strong>Drawback:</strong> Couples the application to Spring.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><code>@PostConstruct</code> annotation:</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Benefit:</strong> Applied directly to the method, clear intent.</p>
</li>
<li>
<p><strong>Drawback:</strong> Requires the IoC container to support JSR-250.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Choosing an Approach:</strong></p>
<div class="ulist">
<ul>
<li>
<p>For <strong>portability</strong> (less coupling to Spring), use
<code>@Bean(initMethod=..)</code> or <code>@PostConstruct</code>.</p>
</li>
<li>
<p>To <strong>reduce configuration</strong> and potential errors, use
<code>InitializingBean</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Private Initialization Methods:</strong> Both <code>@Bean(initMethod=..)</code> and
<code>@PostConstruct</code> allow initialization methods to be declared as
<code>private</code>. Spring can still call them via reflection, preventing
accidental external calls and ensuring they are only invoked once during
bean creation.</p>
</li>
</ul>
</div>
<hr>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>According to the text, what specific access right advantage do <code>@Bean(initMethod=..)</code> and <code>@PostConstruct</code> offer for initialization methods, and why is this considered beneficial?</p>
</li>
<li>
<p>In the <code>Singer</code> class example (Listing 4-5), what specific conditions does the <code>postConstruct()</code> method check for, and what actions does it take if those conditions are not met?</p>
</li>
<li>
<p>When comparing bean initialization approaches, what is the main benefit of using the <code>InitializingBean</code> interface, and what is its primary drawback regarding application coupling?</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_understanding_order_of_resolution">Understanding Order of Resolution</h3>
<div class="exampleblock">
<div class="content">
<a href="https://github.com/Apress/pro-spring-6/blob/main/chapter04/src/main/java/com/apress/prospring6/four/all/AllInitMethodsDemo.java" target="_blank">
chapter04/src/main/java/com/apress/prospring6/four/all/AllInitMethodsDemo.java</a>
</div>
</div>
<div class="paragraph">
<p>The provided text details the specific order in which Spring invokes various initialization mechanisms on a single bean instance. This order is a fundamental part of the Spring bean creation lifecycle:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Constructor Call:</strong> The bean instance is first created by calling its constructor.</p>
</li>
<li>
<p><strong>Dependency Injection:</strong> Dependencies are injected, typically via setters (e.g., methods annotated with <code>@Autowired</code>), which is handled by infrastructure beans like <code>AutowiredAnnotationBeanPostProcessor</code>.</p>
</li>
<li>
<p><strong>Pre-Initialization Callbacks (<code>@PostConstruct</code>):</strong> Before the main initialization, pre-initialization <code>BeanPostProcessor</code>-s are consulted. The <code>@PostConstruct</code> annotated method is invoked at this stage (managed by <code>CommonAnnotationBeanPostProcessor</code>). This happens <strong>after</strong> construction and dependency injection, but <strong>before</strong> <code>afterPropertiesSet()</code> and the <code>initMethod</code>.</p>
</li>
<li>
<p><strong><code>InitializingBean.afterPropertiesSet()</code>:</strong> If the bean implements the <code>InitializingBean</code> interface, its <code>afterPropertiesSet()</code> method is executed next, once all bean properties have been set.</p>
</li>
<li>
<p><strong>Custom Initialization Method (<code>initMethod</code>):</strong> Finally, the method specified by the <code>initMethod</code> attribute in the <code>@Bean</code> annotation is executed. This is considered the "actual" initialization method of the bean.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>AllInitMethodsDemo</code> example, including the <code>MultiInit</code> class and <code>MultiInitConfiguration</code>, clearly demonstrates this precise order in its console output: Constructor &#8594; Setter (<code>@Autowired</code>) &#8594; <code>@PostConstruct</code> &#8594; <code>afterPropertiesSet()</code> &#8594; <code>initMethod</code>. Spring leverages internal <code>BeanPostProcessor</code> infrastructure beans (like <code>CommonAnnotationBeanPostProcessor</code> for <code>@PostConstruct</code> and <code>AutowiredAnnotationBeanPostProcessor</code> for <code>@Autowired</code>) to manage these steps.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When a single Spring bean instance utilizes all available initialization mechanisms (constructor, <code>@Autowired</code> setters, <code>@PostConstruct</code>, <code>InitializingBean.afterPropertiesSet()</code>, and a method specified by <code>@Bean(initMethod)</code>), what is the precise order in which these methods are invoked by Spring?</p>
</li>
<li>
<p>Which specific Spring infrastructure <code>BeanPostProcessor</code> is responsible for processing the <code>@PostConstruct</code> annotation, and at what stage of the bean creation process (relative to dependency injection and <code>afterPropertiesSet()</code>) does it execute the annotated method?</p>
</li>
<li>
<p>According to the <code>AllInitMethodsDemo</code> example and its console output (Listing 4-7), what is the exact sequence of log messages indicating the execution order of the <code>MultiInit</code> bean&#8217;s lifecycle methods, from its constructor call to its final initialization method?</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_making_your_beans_spring_aware">Making Your Beans “Spring Aware”</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_using_the_beannameaware_interface">Using the BeanNameAware Interface</h3>
<div class="paragraph">
<p>The <code>BeanNameAware</code> interface in Spring allows a bean to obtain its own name within the Spring container.</p>
</div>
<div class="paragraph">
<p><strong>Key aspects:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Method:</strong> It has a single method, <code>setBeanName(String beanName)</code>.</p>
</li>
<li>
<p><strong>Invocation:</strong> Spring calls this method after the bean has been configured but <strong>before</strong> any lifecycle callbacks (like initialization or destruction methods).</p>
</li>
<li>
<p><strong>Implementation:</strong> Typically, the <code>setBeanName()</code> method simply stores the provided bean name in a private field for later use by the bean.</p>
</li>
<li>
<p><strong>Usage:</strong> No special configuration is required to use <code>BeanNameAware</code>. It&#8217;s often used to enhance log messages by including the bean&#8217;s name.</p>
</li>
<li>
<p><strong>Caution:</strong> While useful for internal purposes like logging, it&#8217;s advised <strong>not</strong> to give bean names business meaning solely to leverage <code>BeanNameAware</code>. If a bean requires an internal "name" with business significance, it&#8217;s better to define a custom interface (e.g., <code>Nameable</code>) and inject the name via dependency injection, keeping Spring configuration names concise and separate from business logic.</p>
</li>
</ul>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>According to the text, at what precise point in the Spring bean lifecycle is the <code>setBeanName()</code> method of the <code>BeanNameAware</code> interface invoked, relative to bean configuration and other lifecycle callbacks?</p>
</li>
<li>
<p>What is a common practical application for using the <code>BeanNameAware</code> interface highlighted in the provided example, and what specific temptation should developers avoid when assigning names to beans via this mechanism?</p>
</li>
<li>
<p>Does the <code>BeanNameAware</code> interface require any special Spring configuration to be utilized, and what is the typical, minimal implementation pattern for its <code>setBeanName()</code> method as demonstrated in the <code>NamedSinger</code> example?</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_using_the_applicationcontextaware_interface">Using the ApplicationContextAware Interface</h3>
<div class="paragraph">
<p>The <code>ApplicationContextAware</code> interface allows a Spring bean to obtain a reference to its configuring <code>ApplicationContext</code> instance. While it enables programmatic access to other beans via <code>getBean()</code>, this practice is generally discouraged in favor of dependency injection to avoid unnecessary coupling and complexity.</p>
</div>
<div class="paragraph">
<p>A key use case for <code>ApplicationContextAware</code> is demonstrated by automatically registering a shutdown hook. By implementing <code>ApplicationContextAware</code> and its <code>setApplicationContext()</code> method, a bean (like <code>ShutdownHookBean</code>) can check if the <code>ApplicationContext</code> is a <code>GenericApplicationContext</code> and then call <code>registerShutdownHook()</code> on it. This eliminates the need for manual <code>ctx.registerShutdownHook()</code> calls during application bootstrap, ensuring that <code>preDestroy()</code> methods on singletons are automatically invoked when the application shuts down.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>How does the <code>ShutdownHookBean</code> implementation in Listing 4-15 determine if it can register a shutdown hook, and what specific method does it call to perform this registration?</p>
</li>
<li>
<p>What is the key advantage of configuring the <code>ShutdownHookBean</code> as shown in Listing 4-16, specifically regarding the need for explicit shutdown hook registration in the <code>AwareDemo</code> application?</p>
</li>
<li>
<p>What was the primary reason given for the creation of the <code>ApplicationContextAware</code> interface, and what specific practice is strongly advised against when using it to obtain other beans?</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_use_of_factorybeans">Use of FactoryBeans</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_factorybean_example_the_messagedigestfactorybean">FactoryBean Example - The MessageDigestFactoryBean</h3>
<div class="exampleblock">
<div class="content">
<a href="https://github.com/Apress/pro-spring-6/blob/main/chapter04/src/main/java/com/apress/prospring6/four/factory/FactoryBeanDemo.java" target="_blank">
chapter04/src/main/java/com/apress/prospring6/four/factory/FactoryBeanDemo.java</a>
<hr>
<a href="04_diagram_FactoryBeanDemo.html" target="_blank">
Diagram - FactoryBeanDemo</a>
</div>
</div>
<div class="paragraph">
<p>The provided text explains how to integrate Java&#8217;s <code>MessageDigest</code>
class, which requires creation via a static factory method
(<code>MessageDigest.getInstance()</code>), into a Spring application using a
<code>FactoryBean</code>.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a summary of the key points:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Problem Statement:</strong> Java&#8217;s <code>MessageDigest</code> class cannot be
instantiated directly with <code>new</code>; it requires
<code>MessageDigest.getInstance("algorithm")</code>. Managing such objects in
Spring without a <code>FactoryBean</code> would necessitate an <code>algorithmName</code>
property on the bean and an initialization callback to invoke
<code>getInstance()</code>.</p>
</li>
<li>
<p><strong>Solution: <code>FactoryBean</code>:</strong> Spring&#8217;s <code>FactoryBean</code> interface
provides a way to encapsulate complex object creation logic. It allows
other beans to declare a dependency on the <em>product</em> of the
<code>FactoryBean</code> (e.g., <code>MessageDigest</code>), rather than the
<code>FactoryBean</code> itself.</p>
</li>
<li>
<p><strong><code>MessageDigestFactoryBean</code> Implementation:</strong></p>
<div class="ulist">
<ul>
<li>
<p>It implements <code>FactoryBean&lt;MessageDigest&gt;</code> and <code>InitializingBean</code>.</p>
</li>
<li>
<p><code>afterPropertiesSet()</code>: This callback method is used to create the
actual <code>MessageDigest</code> instance by calling
<code>MessageDigest.getInstance(algorithmName)</code>. The <code>algorithmName</code>
defaults to "MD5" but can be configured.</p>
</li>
<li>
<p><code>getObject()</code>: Returns the <code>MessageDigest</code> instance created in
<code>afterPropertiesSet()</code>. This is the object that Spring injects into
other beans.</p>
</li>
<li>
<p><code>getObjectType()</code>: Specifies that the factory produces objects of
type <code>MessageDigest.class</code>.</p>
</li>
<li>
<p><code>isSingleton()</code>: Indicates that the <em>produced</em> <code>MessageDigest</code>
instance is a singleton.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Consuming the `FactoryBean&#8217;s Product:</strong></p>
<div class="ulist">
<ul>
<li>
<p>A <code>MessageDigester</code> bean is introduced, which has two
<code>MessageDigest</code> dependencies (<code>digest1</code> and <code>digest2</code>).</p>
</li>
<li>
<p>In the Spring configuration (<code>MessageDigestConfig</code>), two
<code>MessageDigestFactoryBean</code> beans are defined (one for SHA1, one for
MD5).</p>
</li>
<li>
<p>The <code>MessageDigester</code> bean then explicitly obtains the
<code>MessageDigest</code> instances by calling <code>getObject()</code> on the configured
<code>MessageDigestFactoryBean</code> beans, demonstrating how the factory
provides the actual <code>MessageDigest</code> objects for injection.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Benefits of <code>FactoryBean</code>:</strong></p>
<div class="ulist">
<ul>
<li>
<p>It&#8217;s ideal for integrating classes that cannot be created directly
using the <code>new</code> operator (e.g., those requiring static factory methods
or complex setup).</p>
</li>
<li>
<p>It acts as an adapter, allowing such objects to fully leverage
Spring&#8217;s Inversion of Control (IoC) capabilities.</p>
</li>
<li>
<p>It simplifies the configuration for consuming beans, as they only need
to declare a dependency on the product type, while the <code>FactoryBean</code>
handles the underlying creation complexity.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>What is the primary benefit of using a <code>FactoryBean</code> over a simple
property-based initialization callback when creating a <code>MessageDigest</code>
object in Spring?</strong> <em>This question targets the core reason for using the
<code>FactoryBean</code> pattern as explained in the text – encapsulating the
<code>MessageDigest.getInstance()</code> logic.</em></p>
</li>
<li>
<p><strong>According to the provided code, what default algorithm is used by the
<code>MessageDigestFactoryBean</code> if the <code>algorithmName</code> property is not
explicitly set?</strong> <em>This question requires a close reading of the
<code>MessageDigestFactoryBean</code> class to identify the default value
assigned to <code>algorithmName</code>.</em></p>
</li>
<li>
<p><strong>In the context of Spring&#8217;s IoC container, what is the difference
between setting the scope of a <code>FactoryBean</code> itself versus the objects
it returns?</strong> <em>This question focuses on a nuanced point about the
<code>isSingleton()</code> method and the <code>@Scope</code> annotation, which is
specifically addressed in the text.</em></p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_accessing_a_factorybean_directly">Accessing a FactoryBean Directly</h3>
<div class="paragraph">
<p>This text explains how to directly access a <code>FactoryBean</code> in Spring. While Spring automatically provides the object <strong>produced</strong> by a <code>FactoryBean</code>, you can access the <code>FactoryBean</code> itself by prefixing the bean name with an ampersand (<code>&amp;</code>) when calling <code>getBean()</code>.</p>
</div>
<div class="paragraph">
<p>However, the text strongly advises <strong>against</strong> directly accessing the <code>FactoryBean</code> and manually calling <code>getObject()</code>. The <code>FactoryBean</code> is intended as internal infrastructure to support IoC, and directly interacting with it creates unnecessary coupling and extra work, potentially leading to issues if Spring&#8217;s implementation details change. It&#8217;s best to let Spring manage the object creation process.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>How does Spring allow direct access to a <code>FactoryBean</code> instance,
and what prefix is required when using <code>getBean()</code> to achieve this?</strong>
(Answer is directly stated: prefix the bean name with an ampersand –
<code>&amp;</code>.)</p>
</li>
<li>
<p><strong>In the provided code example (<code>FactoryBeanDemo</code>), what is being
cast to <code>MessageDigestFactoryBean</code> when retrieving it from the
application context?</strong> (Answer: <code>ctx.getBean("&amp;shaDigest")</code> is cast to
<code>MessageDigestFactoryBean</code>.)</p>
</li>
<li>
<p><strong>According to the text, what is the primary <em>intended</em> purpose of a
<code>FactoryBean</code>, and why is directly accessing it and calling
<code>getObject()</code> discouraged?</strong> (Answer: It&#8217;s intended as supporting
infrastructure for IoC, and direct access creates unnecessary coupling
to implementation details.)</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-06-06 10:00:52 +0300
</div>
</div>
</body>
</html>