<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>DeepLearning.AI: Reasoning with o1: Lesson 3: Planning with o1</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-right">
<div id="header">
<h1>DeepLearning.AI: Reasoning with o1: Lesson 3: Planning with o1</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_definition">Definition</a>
<ul class="sectlevel2">
<li><a href="#_describe_functions_that_will_be_passed_to_the_4o_mini_helper">Describe functions that will be passed to the 4o-mini helper</a></li>
<li><a href="#_these_are_the_instantiations_of_the_functions_the_4o_mini_helper_will_use">These are the instantiations of the functions the 4o-mini helper will use.</a></li>
<li><a href="#_knit_together_the_process">Knit together the process.</a></li>
<li><a href="#_helper_function">Helper function</a></li>
<li><a href="#_calls_the_planner_o1_model">Calls the planner, o1 model.</a></li>
<li><a href="#_call_4o_mini_to_execute_the_plan">Call 4o-mini to execute the plan.</a></li>
</ul>
</li>
<li><a href="#_execution">Execution</a>
<ul class="sectlevel2">
<li><a href="#_print_messages">Print messages</a></li>
</ul>
</li>
<li><a href="#_utils_py">utils.py</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>One of the great use cases where <code>o1</code> models shine is
creating a plan to solve a task given a set of tools to carry out the
plan, and constraints to set bounds around the task. This kind of use
case would be very slow if we used <code>o1</code> for every step, so
what we&#8217;ll do is generate a plan with <code>o1-mini</code> and then
execute each step with <code>gpt-4o-mini</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="keyword">import</span> <span class="include">copy</span>
<span class="keyword">import</span> <span class="include">json</span>
<span class="keyword">from</span> <span class="include">openai</span> <span class="keyword">import</span> <span class="include">OpenAI</span>

<span class="keyword">from</span> <span class="include">utils</span> <span class="keyword">import</span> <span class="include">o1_tools</span>

client = OpenAI()
O1_MODEL = <span class="string"><span class="delimiter">'</span><span class="content">o1-mini</span><span class="delimiter">'</span></span>
GPT_MODEL = <span class="string"><span class="delimiter">'</span><span class="content">gpt-4o-mini</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_definition">Definition</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Initialize the message list</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python">message_list = []</code></pre>
</div>
</div>
<div class="paragraph">
<p>Define the initial context for the application</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python">context = {
    <span class="string"><span class="delimiter">'</span><span class="content">inventory</span><span class="delimiter">'</span></span>: {
        <span class="string"><span class="delimiter">'</span><span class="content">X200</span><span class="delimiter">'</span></span>: <span class="integer">50</span>  <span class="comment"># We currently have 50 units of Smart Home Hub X200 in stock</span>
    },
    <span class="string"><span class="delimiter">'</span><span class="content">orders</span><span class="delimiter">'</span></span>: [
        {
            <span class="string"><span class="delimiter">'</span><span class="content">order_id</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">ORD3001</span><span class="delimiter">'</span></span>,
            <span class="string"><span class="delimiter">'</span><span class="content">product_id</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">X200</span><span class="delimiter">'</span></span>,
            <span class="string"><span class="delimiter">'</span><span class="content">quantity</span><span class="delimiter">'</span></span>: <span class="integer">200</span>,
            <span class="string"><span class="delimiter">'</span><span class="content">customer_id</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">CUST9001</span><span class="delimiter">'</span></span>,
            <span class="string"><span class="delimiter">'</span><span class="content">destination</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">Los Angeles</span><span class="delimiter">'</span></span>,
            <span class="string"><span class="delimiter">'</span><span class="content">weight</span><span class="delimiter">'</span></span>: <span class="float">1.5</span>,  <span class="comment"># Weight per unit in kg</span>
            <span class="string"><span class="delimiter">'</span><span class="content">dimensions</span><span class="delimiter">'</span></span>: {<span class="string"><span class="delimiter">'</span><span class="content">length</span><span class="delimiter">'</span></span>: <span class="integer">20</span>, <span class="string"><span class="delimiter">'</span><span class="content">width</span><span class="delimiter">'</span></span>: <span class="integer">15</span>, <span class="string"><span class="delimiter">'</span><span class="content">height</span><span class="delimiter">'</span></span>: <span class="integer">10</span>}  <span class="comment"># Dimensions in cm</span>
        }
    ],
    <span class="string"><span class="delimiter">'</span><span class="content">available_suppliers</span><span class="delimiter">'</span></span>: [<span class="string"><span class="delimiter">'</span><span class="content">SUPP1001</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">SUPP1002</span><span class="delimiter">'</span></span>],
    <span class="string"><span class="delimiter">'</span><span class="content">suppliers</span><span class="delimiter">'</span></span>: {
        <span class="string"><span class="delimiter">'</span><span class="content">SUPP1001</span><span class="delimiter">'</span></span>: {
            <span class="string"><span class="delimiter">'</span><span class="content">components</span><span class="delimiter">'</span></span>: {
                <span class="string"><span class="delimiter">'</span><span class="content">COMP_X200</span><span class="delimiter">'</span></span>: {<span class="string"><span class="delimiter">'</span><span class="content">available_quantity</span><span class="delimiter">'</span></span>: <span class="integer">500</span>}
            }
        },
        <span class="string"><span class="delimiter">'</span><span class="content">SUPP1002</span><span class="delimiter">'</span></span>: {
            <span class="string"><span class="delimiter">'</span><span class="content">components</span><span class="delimiter">'</span></span>: {
                <span class="string"><span class="delimiter">'</span><span class="content">COMP_X300</span><span class="delimiter">'</span></span>: {<span class="string"><span class="delimiter">'</span><span class="content">available_quantity</span><span class="delimiter">'</span></span>: <span class="integer">300</span>}
            }
        }
    },
    <span class="string"><span class="delimiter">'</span><span class="content">production_capacity</span><span class="delimiter">'</span></span>: {
        <span class="string"><span class="delimiter">'</span><span class="content">immediate</span><span class="delimiter">'</span></span>: <span class="integer">100</span>,      <span class="comment"># Units we can produce immediately</span>
        <span class="string"><span class="delimiter">'</span><span class="content">next_week</span><span class="delimiter">'</span></span>: <span class="integer">150</span>       <span class="comment"># Units we can produce next week</span>
    },
    <span class="string"><span class="delimiter">'</span><span class="content">shipping_options</span><span class="delimiter">'</span></span>: {
        <span class="string"><span class="delimiter">'</span><span class="content">Los Angeles</span><span class="delimiter">'</span></span>: [
            {
                <span class="string"><span class="delimiter">'</span><span class="content">carrier_id</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">CARRIER1</span><span class="delimiter">'</span></span>,
                <span class="string"><span class="delimiter">'</span><span class="content">service_level</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">Standard</span><span class="delimiter">'</span></span>,
                <span class="string"><span class="delimiter">'</span><span class="content">cost</span><span class="delimiter">'</span></span>: <span class="integer">1000</span>,
                <span class="string"><span class="delimiter">'</span><span class="content">estimated_days</span><span class="delimiter">'</span></span>: <span class="integer">5</span>
            },
            {
                <span class="string"><span class="delimiter">'</span><span class="content">carrier_id</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">CARRIER2</span><span class="delimiter">'</span></span>,
                <span class="string"><span class="delimiter">'</span><span class="content">service_level</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">Express</span><span class="delimiter">'</span></span>,
                <span class="string"><span class="delimiter">'</span><span class="content">cost</span><span class="delimiter">'</span></span>: <span class="integer">1500</span>,
                <span class="string"><span class="delimiter">'</span><span class="content">estimated_days</span><span class="delimiter">'</span></span>: <span class="integer">2</span>
            }
        ]
    },
    <span class="string"><span class="delimiter">'</span><span class="content">customers</span><span class="delimiter">'</span></span>: {
        <span class="string"><span class="delimiter">'</span><span class="content">CUST9001</span><span class="delimiter">'</span></span>: {
            <span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">ElectroWorld</span><span class="delimiter">'</span></span>,
            <span class="string"><span class="delimiter">'</span><span class="content">address</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">123 Market Street, Los Angeles, CA</span><span class="delimiter">'</span></span>
        }
    },
    <span class="string"><span class="delimiter">'</span><span class="content">products</span><span class="delimiter">'</span></span>: {
        <span class="string"><span class="delimiter">'</span><span class="content">X200</span><span class="delimiter">'</span></span>: {
            <span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">Smart Home Hub X200</span><span class="delimiter">'</span></span>,
            <span class="string"><span class="delimiter">'</span><span class="content">components_needed</span><span class="delimiter">'</span></span>: {
                <span class="string"><span class="delimiter">'</span><span class="content">COMP_X200</span><span class="delimiter">'</span></span>: <span class="integer">1</span>  <span class="comment"># Each unit requires 1 component COMP_X200</span>
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Store the initial state of context</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python">initial_context = copy.deepcopy(context)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Prompt for the planning model</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python">o1_prompt = <span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">
</span><span class="content">You are a supply chain management assistant. The first input you will receive will be a complex task that needs to be carefully reasoned through to solve.</span><span class="content">
</span><span class="content">Your task is to review the challenge, and create a detailed plan to process customer orders, manage inventory, and handle logistics.</span><span class="content">
</span><span class="content">
</span><span class="content">You will have access to an LLM agent that is responsible for executing the plan that you create and will return results.</span><span class="content">
</span><span class="content">
</span><span class="content">The LLM agent has access to the following functions:</span><span class="content">
</span><span class="content">    - get_inventory_status(product_id)</span><span class="content">
</span><span class="content">        - This gets the currently available product that we have</span><span class="content">
</span><span class="content">    - get_product_details(product_id)</span><span class="content">
</span><span class="content">        - This function gets the necessary components we need to manufacture additional product</span><span class="content">
</span><span class="content">    - update_inventory(product_id, quantity_change)</span><span class="content">
</span><span class="content">        - This function updates the currently available inventory of product.</span><span class="content">
</span><span class="content">        - This function should be called after we have allocated stock to an order.</span><span class="content">
</span><span class="content">    - fetch_new_orders()</span><span class="content">
</span><span class="content">        - The function checks the current status of new orders</span><span class="content">
</span><span class="content">    - allocate_stock(order_id, product_id, quantity)</span><span class="content">
</span><span class="content">        - This function allocates the stock of a product to an order.</span><span class="content">
</span><span class="content">    - check_available_suppliers()</span><span class="content">
</span><span class="content">        - This function checks the list of available suppliers we can leverage for additional components.</span><span class="content">
</span><span class="content">    - get_supplier_info(supplier_id)</span><span class="content">
</span><span class="content">        - This function returns the components the supplier can produce and the quantity of that component.</span><span class="content">
</span><span class="content">        - It is necessary to get the components required in order to place a purchase order with the supplier.</span><span class="content">
</span><span class="content">    - place_purchase_order(supplier_id, component_id, quantity)</span><span class="content">
</span><span class="content">        - This function places a purchase order with the supplier for additional components</span><span class="content">
</span><span class="content">        - In order to place the purchase order, we need to know the necessary components and the supplier id.</span><span class="content">
</span><span class="content">        - If the supplier specified does not have this component available, the function will fail.</span><span class="content">
</span><span class="content">    - check_production_capacity(time_frame)</span><span class="content">
</span><span class="content">        - Based on the amount of components we have, this function determines how much product we can produce on-site within a specific time-frame</span><span class="content">
</span><span class="content">        - If we do not have sufficient production capacity, a purchase order will need to be made to the supplier</span><span class="content">
</span><span class="content">    - schedule_production_run(product_id, quantity, time_frame)</span><span class="content">
</span><span class="content">        - This function convert the available production supply to product.</span><span class="content">
</span><span class="content">        - Any production scheduled will reduce the production capacity immediately available and available next week.</span><span class="content">
</span><span class="content">        - The time frame values can match the production capacity options: 'immediate' or 'next_week'</span><span class="content">
</span><span class="content">        - If a production run is scheduled with time frame 'immediate', it will automatically update our inventory with the new capacity. We should not call 'update_inventory' after.</span><span class="content">
</span><span class="content">    - calculate_shipping_options(destination, weight, dimensions)</span><span class="content">
</span><span class="content">        - This function determines the available shipping options and costs</span><span class="content">
</span><span class="content">        - Only currently available inventory can be shipped</span><span class="content">
</span><span class="content">        - Destination should match the destination name on the order</span><span class="content">
</span><span class="content">    - book_shipment(order_id, carrier_id, service_level)</span><span class="content">
</span><span class="content">        - This will book a shipment for a current order.</span><span class="content">
</span><span class="content">    - send_order_update(customer_id, order_id, message)</span><span class="content">
</span><span class="content">        - This will send an update to the customer and is necessary for any communications</span><span class="content">
</span><span class="content">        - It is important to keep customers in the loop about the status of the order</span><span class="content">
</span><span class="content">
</span><span class="content">When creating a plan for the LLM to execute, break your instructions into a logical, step-by-step order, using the specified format:</span><span class="content">
</span><span class="content">    - **Main actions are numbered** (e.g., 1, 2, 3).</span><span class="content">
</span><span class="content">    - **Sub-actions are lettered** under their relevant main actions (e.g., 1a, 1b).</span><span class="content">
</span><span class="content">        - **Sub-actions should start on new lines**</span><span class="content">
</span><span class="content">    - **Specify conditions using clear 'if...then...else' statements** (e.g., 'If the product was purchased within 30 days, then...').</span><span class="content">
</span><span class="content">    - **For actions that require using one of the above functions defined**, write a step to call a function using backticks for the function name (e.g., `call the get_inventory_status function`).</span><span class="content">
</span><span class="content">        - Ensure that the proper input arguments are given to the model for instruction. There should not be any ambiguity in the inputs.</span><span class="content">
</span><span class="content">    - **The last step** in the instructions should always be calling the `instructions_complete` function. This is necessary so we know the LLM has completed all of the instructions you have given it.</span><span class="content">
</span><span class="content">    - **Detailed steps** The plan generated must be extremely detailed and thorough with explanations at every step.</span><span class="content">
</span><span class="content">Use markdown format when generating the plan with each step and sub-step.</span><span class="content">
</span><span class="content">
</span><span class="content">Please find the scenario below.</span><span class="content">
</span><span class="delimiter">&quot;&quot;&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>System prompt for the execution model</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python">gpt4o_system_prompt = <span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">
</span><span class="content">You are a helpful assistant responsible for executing the policy on handling incoming orders. Your task is to follow the policy exactly as it is written and perform the necessary actions.</span><span class="content">
</span><span class="content">
</span><span class="content">You must explain your decision-making process across various steps.</span><span class="content">
</span><span class="content">
</span><span class="content"># Steps</span><span class="content">
</span><span class="content">
</span><span class="content">1. **Read and Understand Policy**: Carefully read and fully understand the given policy on handling incoming orders.</span><span class="content">
</span><span class="content">2. **Identify the exact step in the policy**: Determine which step in the policy you are at, and execute the instructions according to the policy.</span><span class="content">
</span><span class="content">3. **Decision Making**: Briefly explain your actions and why you are performing them.</span><span class="content">
</span><span class="content">4. **Action Execution**: Perform the actions required by calling any relevant functions and input parameters.</span><span class="content">
</span><span class="content">
</span><span class="content">POLICY:</span><span class="content">
</span><span class="content">{policy}</span><span class="content">
</span><span class="content">
</span><span class="delimiter">&quot;&quot;&quot;</span></span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_describe_functions_that_will_be_passed_to_the_4o_mini_helper">Describe functions that will be passed to the 4o-mini helper</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python">TOOLS = [
    {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">get_inventory_status</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Retrieves the current inventory status for a given product. This only shows the currently available inventory for PRODUCTS and not components.</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>: {
                <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">product_id</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The unique identifier for the product.</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">enum</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">X100</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">X200</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">X300</span><span class="delimiter">&quot;</span></span>]
                    },
                },
                <span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">product_id</span><span class="delimiter">&quot;</span></span>],
                <span class="string"><span class="delimiter">&quot;</span><span class="content">additionalProperties</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">False</span>,
            },
        },
    },
    {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">update_inventory</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Updates the inventory quantity for a specific product. This should be called after we have allocated stock to an order</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>: {
                <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">product_id</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The unique identifier for the product.</span><span class="delimiter">&quot;</span></span>,
                    },
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">quantity_change</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">integer</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The amount to adjust the inventory by (positive or negative).</span><span class="delimiter">&quot;</span></span>,
                    },
                },
                <span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">product_id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">quantity_change</span><span class="delimiter">&quot;</span></span>],
                <span class="string"><span class="delimiter">&quot;</span><span class="content">additionalProperties</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">False</span>,
            },
        },
    },
    {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">fetch_new_orders</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Fetches new customer orders that have not been processed yet. There are no input parameters for this function.</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>: {
                <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {},
                <span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [],
                <span class="string"><span class="delimiter">&quot;</span><span class="content">additionalProperties</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">False</span>,
            },
        },
    },
    {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">check_available_suppliers</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">This functions checks the list of available suppliers we can leverage for additional components.</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>: {
                <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {},
                <span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [],
                <span class="string"><span class="delimiter">&quot;</span><span class="content">additionalProperties</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">False</span>,
            },
        },
    },
    {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">get_product_details</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Fetches the product details included the required components necessary for creating more of the product.</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>: {
                <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">product_id</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The unique identifier of the product.</span><span class="delimiter">&quot;</span></span>,
                    }
                },
                <span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">product_id</span><span class="delimiter">&quot;</span></span>],
                <span class="string"><span class="delimiter">&quot;</span><span class="content">additionalProperties</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">False</span>,
            },
        },
    },
    {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">get_supplier_info</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">This function returns the components the supplier can produce and the quantity of that component. It is necessary to get the components required in order to place a purchase order with the supplier.</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>: {
                <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">supplier_id</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The unique identifier of the supplier.</span><span class="delimiter">&quot;</span></span>,
                    }
                },
                <span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">supplier_id</span><span class="delimiter">&quot;</span></span>],
                <span class="string"><span class="delimiter">&quot;</span><span class="content">additionalProperties</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">False</span>,
            },
        },
    },
    {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">allocate_stock</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Allocates stock for a specific order and product.</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>: {
                <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">order_id</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The unique identifier of the customer order.</span><span class="delimiter">&quot;</span></span>,
                    },
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">product_id</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The unique identifier of the product.</span><span class="delimiter">&quot;</span></span>,
                    },
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">quantity</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">integer</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The quantity of the product to allocate.</span><span class="delimiter">&quot;</span></span>,
                    },
                },
                <span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">order_id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">product_id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">quantity</span><span class="delimiter">&quot;</span></span>],
                <span class="string"><span class="delimiter">&quot;</span><span class="content">additionalProperties</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">False</span>,
            },
        },
    },
    {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">place_purchase_order</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">This function places a purchase order with the supplier for additional components. In order to place the purchase order, we need to know the necessary components and the supplier id. If the supplier specified does not have this component available, the function will fail.</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>: {
                <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">supplier_id</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The unique identifier of the supplier.</span><span class="delimiter">&quot;</span></span>,
                    },
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">component_id</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The unique identifier of the component.</span><span class="delimiter">&quot;</span></span>,
                    },
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">quantity</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">integer</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The quantity of the component to order.</span><span class="delimiter">&quot;</span></span>,
                    },
                },
                <span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">supplier_id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">component_id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">quantity</span><span class="delimiter">&quot;</span></span>],
                <span class="string"><span class="delimiter">&quot;</span><span class="content">additionalProperties</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">False</span>,
            },
        },
    },
    {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">check_production_capacity</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Based on the amount of components we have, this function determines how much product we can produce on-site within a specific time-frame. If we do not have sufficient production capacity, a purchase order will need to be made to the supplier</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>: {
                <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">time_frame</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The time frame to check,</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">enum</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">immediate</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">next_week</span><span class="delimiter">&quot;</span></span>]
                    },
                },
                <span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">time_frame</span><span class="delimiter">&quot;</span></span>],
                <span class="string"><span class="delimiter">&quot;</span><span class="content">additionalProperties</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">False</span>,
            },
        },
    },
    {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">schedule_production_run</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">This function convert the available production supply to product. Any production scheduled will reduce the production capacity immedatiely available and available next week. If the quantity exceeds the immediately available production, it will fail. If a production run is scheduled with time frame 'immediate', it will automatically update our inventory with the new capacity.</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>: {
                <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">product_id</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The unique identifier of the product.</span><span class="delimiter">&quot;</span></span>,
                    },
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">quantity</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">integer</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The quantity of the product to produce.</span><span class="delimiter">&quot;</span></span>,
                    },
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">time_frame</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The time frame for when the production run needs to be scheduled.</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">enum</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">immediate</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">next_week</span><span class="delimiter">&quot;</span></span>]
                    },
                },
                <span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">product_id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">quantity</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">time_frame</span><span class="delimiter">&quot;</span></span>],
                <span class="string"><span class="delimiter">&quot;</span><span class="content">additionalProperties</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">False</span>,
            },
        },
    },
    {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">calculate_shipping_options</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">This function determines the availablwe shipping options and costs. Only currently available inventory can be shipped</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>: {
                <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">destination</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The shipping destination address.</span><span class="delimiter">&quot;</span></span>,
                    },
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The weight of the package in kilograms.</span><span class="delimiter">&quot;</span></span>,
                    },
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">dimensions</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The dimensions of the package (LxWxH) in centimeters.</span><span class="delimiter">&quot;</span></span>,
                    },
                },
                <span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">destination</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">dimensions</span><span class="delimiter">&quot;</span></span>],
                <span class="string"><span class="delimiter">&quot;</span><span class="content">additionalProperties</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">False</span>,
            },
        },
    },
    {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">book_shipment</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Books a shipment for an order using a specific carrier and service level.</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>: {
                <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">order_id</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The unique identifier of the customer order.</span><span class="delimiter">&quot;</span></span>,
                    },
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">carrier_id</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The unique identifier of the shipping carrier.</span><span class="delimiter">&quot;</span></span>,
                    },
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">service_level</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The level of shipping service, e.g., 'Standard', 'Express'.</span><span class="delimiter">&quot;</span></span>,
                    },
                },
                <span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">order_id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">carrier_id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">service_level</span><span class="delimiter">&quot;</span></span>],
                <span class="string"><span class="delimiter">&quot;</span><span class="content">additionalProperties</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">False</span>,
            },
        },
    },
    {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">send_order_update</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">This will send an update to the customer and is necessary for any communincations. It is important to keep customers in the loop about the status of the order</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>: {
                <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">customer_id</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The unique identifier of the customer.</span><span class="delimiter">&quot;</span></span>,
                    },
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">order_id</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The unique identifier of the order.</span><span class="delimiter">&quot;</span></span>,
                    },
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">message</span><span class="delimiter">&quot;</span></span>: {
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The message content to send to the customer.</span><span class="delimiter">&quot;</span></span>,
                    },
                },
                <span class="string"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">customer_id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">order_id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">message</span><span class="delimiter">&quot;</span></span>],
                <span class="string"><span class="delimiter">&quot;</span><span class="content">additionalProperties</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">False</span>,
            },
        },
    },
    {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">function</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">instructions_complete</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Function should be called when we have completed ALL of the instructions.</span><span class="delimiter">&quot;</span></span>,
        },
    }
]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_these_are_the_instantiations_of_the_functions_the_4o_mini_helper_will_use">These are the instantiations of the functions the 4o-mini helper will use.</h3>
<div class="paragraph">
<p>Function Definitions</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="keyword">def</span> <span class="function">get_inventory_status</span>(product_id):
    quantity = context[<span class="string"><span class="delimiter">'</span><span class="content">inventory</span><span class="delimiter">'</span></span>].get(product_id, <span class="integer">0</span>)
    <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">product_id</span><span class="delimiter">'</span></span>: product_id, <span class="string"><span class="delimiter">'</span><span class="content">quantity</span><span class="delimiter">'</span></span>: quantity}

<span class="keyword">def</span> <span class="function">get_product_details</span>(product_id):
    product = context[<span class="string"><span class="delimiter">'</span><span class="content">products</span><span class="delimiter">'</span></span>].get(product_id, {})
    <span class="keyword">return</span> {<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: product.get(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>), <span class="string"><span class="delimiter">&quot;</span><span class="content">components_needed</span><span class="delimiter">&quot;</span></span>: product.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">components_needed</span><span class="delimiter">&quot;</span></span>, {})}

<span class="keyword">def</span> <span class="function">update_inventory</span>(product_id, quantity_change):
    <span class="keyword">if</span> product_id <span class="keyword">not</span> <span class="keyword">in</span> context[<span class="string"><span class="delimiter">'</span><span class="content">inventory</span><span class="delimiter">'</span></span>]:
        <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">error</span><span class="delimiter">'</span></span>: f<span class="string"><span class="delimiter">&quot;</span><span class="content">Product ID {product_id} not found in inventory.</span><span class="delimiter">&quot;</span></span>}

    new_quantity = context[<span class="string"><span class="delimiter">'</span><span class="content">inventory</span><span class="delimiter">'</span></span>][product_id] + <span class="predefined">int</span>(quantity_change)

    <span class="keyword">if</span> new_quantity &lt; <span class="integer">0</span>:
        <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">error</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">Resulting inventory cannot be negative.</span><span class="delimiter">'</span></span>}

    context[<span class="string"><span class="delimiter">'</span><span class="content">inventory</span><span class="delimiter">'</span></span>][product_id] = new_quantity
    <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">product_id</span><span class="delimiter">'</span></span>: product_id, <span class="string"><span class="delimiter">'</span><span class="content">new_quantity</span><span class="delimiter">'</span></span>: new_quantity}

<span class="keyword">def</span> <span class="function">fetch_new_orders</span>():
    <span class="keyword">return</span> context[<span class="string"><span class="delimiter">'</span><span class="content">orders</span><span class="delimiter">'</span></span>][<span class="integer">0</span>]

<span class="keyword">def</span> <span class="function">allocate_stock</span>(order_id, product_id, quantity):
    available = context[<span class="string"><span class="delimiter">'</span><span class="content">inventory</span><span class="delimiter">'</span></span>].get(product_id, <span class="integer">0</span>)
    <span class="keyword">if</span> available &gt;= quantity:
        context[<span class="string"><span class="delimiter">'</span><span class="content">inventory</span><span class="delimiter">'</span></span>][product_id] -= quantity
        <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">order_id</span><span class="delimiter">'</span></span>: order_id, <span class="string"><span class="delimiter">'</span><span class="content">allocated_quantity</span><span class="delimiter">'</span></span>: quantity}
    <span class="keyword">else</span>:
        allocated_quantity = available
        context[<span class="string"><span class="delimiter">'</span><span class="content">inventory</span><span class="delimiter">'</span></span>][product_id] = <span class="integer">0</span>
        <span class="keyword">return</span> {
            <span class="string"><span class="delimiter">'</span><span class="content">order_id</span><span class="delimiter">'</span></span>: order_id,
            <span class="string"><span class="delimiter">'</span><span class="content">allocated_quantity</span><span class="delimiter">'</span></span>: allocated_quantity,
            <span class="string"><span class="delimiter">'</span><span class="content">error</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">Insufficient stock</span><span class="delimiter">'</span></span>
        }

<span class="keyword">def</span> <span class="function">check_available_suppliers</span>():
    available_suppliers = context[<span class="string"><span class="delimiter">'</span><span class="content">available_suppliers</span><span class="delimiter">'</span></span>]
    <span class="keyword">return</span> {<span class="string"><span class="delimiter">&quot;</span><span class="content">available_suppliers</span><span class="delimiter">&quot;</span></span>: available_suppliers}

<span class="keyword">def</span> <span class="function">get_supplier_info</span>(supplier_id):
    supplier = context[<span class="string"><span class="delimiter">'</span><span class="content">suppliers</span><span class="delimiter">'</span></span>].get(supplier_id)
    <span class="keyword">if</span> <span class="keyword">not</span> supplier:
        <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">error</span><span class="delimiter">'</span></span>: f<span class="string"><span class="delimiter">&quot;</span><span class="content">Supplier {supplier_id} not found.</span><span class="delimiter">&quot;</span></span>}

    components = supplier.get(<span class="string"><span class="delimiter">'</span><span class="content">components</span><span class="delimiter">'</span></span>, {})
    <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">supplier_id</span><span class="delimiter">'</span></span>: supplier_id, <span class="string"><span class="delimiter">'</span><span class="content">components</span><span class="delimiter">'</span></span>: components}

<span class="keyword">def</span> <span class="function">place_purchase_order</span>(supplier_id, component_id, quantity):
    supplier = context[<span class="string"><span class="delimiter">'</span><span class="content">suppliers</span><span class="delimiter">'</span></span>].get(supplier_id)
    <span class="keyword">if</span> <span class="keyword">not</span> supplier:
        <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">error</span><span class="delimiter">'</span></span>: f<span class="string"><span class="delimiter">&quot;</span><span class="content">Supplier {supplier_id} not found.</span><span class="delimiter">&quot;</span></span>}
    component = supplier[<span class="string"><span class="delimiter">'</span><span class="content">components</span><span class="delimiter">'</span></span>].get(component_id)
    <span class="keyword">if</span> <span class="keyword">not</span> component:
        <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">error</span><span class="delimiter">'</span></span>: f<span class="string"><span class="delimiter">&quot;</span><span class="content">Component {component_id} not found with supplier {supplier_id}.</span><span class="delimiter">&quot;</span></span>}
    <span class="keyword">if</span> component[<span class="string"><span class="delimiter">'</span><span class="content">available_quantity</span><span class="delimiter">'</span></span>] &lt; quantity:
        <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">error</span><span class="delimiter">'</span></span>: f<span class="string"><span class="delimiter">&quot;</span><span class="content">Insufficient component quantity available from supplier {supplier_id}.</span><span class="delimiter">&quot;</span></span>}
    component[<span class="string"><span class="delimiter">'</span><span class="content">available_quantity</span><span class="delimiter">'</span></span>] -= quantity
    po_number = f<span class="string"><span class="delimiter">&quot;</span><span class="content">PO_{supplier_id}_{component_id}</span><span class="delimiter">&quot;</span></span>
    context[<span class="string"><span class="delimiter">'</span><span class="content">production_capacity</span><span class="delimiter">'</span></span>][<span class="string"><span class="delimiter">'</span><span class="content">next_week</span><span class="delimiter">'</span></span>] += quantity

    <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">po_number</span><span class="delimiter">'</span></span>: po_number, <span class="string"><span class="delimiter">'</span><span class="content">status</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">Placed</span><span class="delimiter">'</span></span>}

<span class="keyword">def</span> <span class="function">check_production_capacity</span>(time_frame):
    capacity = context[<span class="string"><span class="delimiter">'</span><span class="content">production_capacity</span><span class="delimiter">'</span></span>].get(time_frame, <span class="integer">0</span>)
    <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">time_frame</span><span class="delimiter">'</span></span>: time_frame, <span class="string"><span class="delimiter">'</span><span class="content">available_capacity</span><span class="delimiter">'</span></span>: capacity}

<span class="keyword">def</span> <span class="function">schedule_production_run</span>(product_id, quantity, time_frame):
    capacity = context[<span class="string"><span class="delimiter">'</span><span class="content">production_capacity</span><span class="delimiter">'</span></span>].get(time_frame, <span class="integer">0</span>)
    <span class="keyword">if</span> capacity &gt;= quantity:
        context[<span class="string"><span class="delimiter">'</span><span class="content">production_capacity</span><span class="delimiter">'</span></span>][time_frame] -= quantity
        <span class="keyword">if</span> time_frame == <span class="string"><span class="delimiter">'</span><span class="content">immediate</span><span class="delimiter">'</span></span>:
            context[<span class="string"><span class="delimiter">'</span><span class="content">inventory</span><span class="delimiter">'</span></span>][product_id] += quantity
        <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">production_id</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">PROD1001</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">status</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">Scheduled</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">time_frame</span><span class="delimiter">'</span></span>: time_frame}
    <span class="keyword">else</span>:
        <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">error</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">Insufficient production capacity, please order more from supplier.</span><span class="delimiter">'</span></span>}

<span class="keyword">def</span> <span class="function">calculate_shipping_options</span>(destination, weight, dimensions):
    options = context[<span class="string"><span class="delimiter">'</span><span class="content">shipping_options</span><span class="delimiter">'</span></span>].get(destination)
    <span class="keyword">if</span> <span class="keyword">not</span> options:
        <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">error</span><span class="delimiter">'</span></span>: f<span class="string"><span class="delimiter">&quot;</span><span class="content">No shipping options available for destination {destination}.</span><span class="delimiter">&quot;</span></span>}
    <span class="keyword">return</span> options

<span class="keyword">def</span> <span class="function">book_shipment</span>(order_id, carrier_id, service_level):
    tracking_number = f<span class="string"><span class="delimiter">'</span><span class="content">TRACK_{order_id}</span><span class="delimiter">'</span></span>
    <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">tracking_number</span><span class="delimiter">'</span></span>: tracking_number, <span class="string"><span class="delimiter">'</span><span class="content">status</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">Booked</span><span class="delimiter">'</span></span>}

<span class="keyword">def</span> <span class="function">send_order_update</span>(customer_id, order_id, message):
    <span class="keyword">return</span> {<span class="string"><span class="delimiter">'</span><span class="content">customer_id</span><span class="delimiter">'</span></span>: customer_id, <span class="string"><span class="delimiter">'</span><span class="content">order_id</span><span class="delimiter">'</span></span>: order_id, <span class="string"><span class="delimiter">'</span><span class="content">message_sent</span><span class="delimiter">'</span></span>: <span class="predefined-constant">True</span>}

<span class="comment"># Map function names to actual functions</span>
function_mapping = {
    <span class="string"><span class="delimiter">'</span><span class="content">get_inventory_status</span><span class="delimiter">'</span></span>: get_inventory_status,
    <span class="string"><span class="delimiter">'</span><span class="content">get_product_details</span><span class="delimiter">'</span></span>: get_product_details,
    <span class="string"><span class="delimiter">'</span><span class="content">update_inventory</span><span class="delimiter">'</span></span>: update_inventory,
    <span class="string"><span class="delimiter">'</span><span class="content">fetch_new_orders</span><span class="delimiter">'</span></span>: fetch_new_orders,
    <span class="string"><span class="delimiter">'</span><span class="content">allocate_stock</span><span class="delimiter">'</span></span>: allocate_stock,
    <span class="string"><span class="delimiter">'</span><span class="content">place_purchase_order</span><span class="delimiter">'</span></span>: place_purchase_order,
    <span class="string"><span class="delimiter">'</span><span class="content">check_available_suppliers</span><span class="delimiter">'</span></span>: check_available_suppliers,
    <span class="string"><span class="delimiter">'</span><span class="content">get_supplier_info</span><span class="delimiter">'</span></span>: get_supplier_info,
    <span class="string"><span class="delimiter">'</span><span class="content">check_production_capacity</span><span class="delimiter">'</span></span>: check_production_capacity,
    <span class="string"><span class="delimiter">'</span><span class="content">schedule_production_run</span><span class="delimiter">'</span></span>: schedule_production_run,
    <span class="string"><span class="delimiter">'</span><span class="content">calculate_shipping_options</span><span class="delimiter">'</span></span>: calculate_shipping_options,
    <span class="string"><span class="delimiter">'</span><span class="content">book_shipment</span><span class="delimiter">'</span></span>: book_shipment,
    <span class="string"><span class="delimiter">'</span><span class="content">send_order_update</span><span class="delimiter">'</span></span>: send_order_update
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_knit_together_the_process">Knit together the process.</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>call o1 to generate a plan,</p>
</li>
<li>
<p>call 4o-mini to execute the plan</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="keyword">def</span> <span class="function">process_scenario</span>(scenario):
    append_message({<span class="string"><span class="delimiter">'</span><span class="content">type</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">status</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">message</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">Generating plan...</span><span class="delimiter">'</span></span>})

    plan = call_o1(scenario)

    append_message({<span class="string"><span class="delimiter">'</span><span class="content">type</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">plan</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">content</span><span class="delimiter">'</span></span>: plan})

    append_message({<span class="string"><span class="delimiter">'</span><span class="content">type</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">status</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">message</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">Executing plan...</span><span class="delimiter">'</span></span>})

    messages = call_gpt4o(plan)

    append_message({<span class="string"><span class="delimiter">'</span><span class="content">type</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">status</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">message</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">Processing complete.</span><span class="delimiter">'</span></span>})

    <span class="keyword">return</span> messages</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helper_function">Helper function</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="keyword">def</span> <span class="function">append_message</span>(message):
    message_list.append(message)
    <span class="comment"># Optionally, print the message for immediate feedback</span>
    message_type = message.get(<span class="string"><span class="delimiter">'</span><span class="content">type</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>)
    <span class="keyword">if</span> message_type == <span class="string"><span class="delimiter">'</span><span class="content">status</span><span class="delimiter">'</span></span>:
        print(message[<span class="string"><span class="delimiter">'</span><span class="content">message</span><span class="delimiter">'</span></span>])
    <span class="keyword">elif</span> message_type == <span class="string"><span class="delimiter">'</span><span class="content">plan</span><span class="delimiter">'</span></span>:
        print(<span class="string"><span class="delimiter">&quot;</span><span class="char">\n</span><span class="content">Plan:</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>, message[<span class="string"><span class="delimiter">'</span><span class="content">content</span><span class="delimiter">'</span></span>])
    <span class="keyword">elif</span> message_type == <span class="string"><span class="delimiter">'</span><span class="content">assistant</span><span class="delimiter">'</span></span>:
        print(<span class="string"><span class="delimiter">&quot;</span><span class="char">\n</span><span class="content">Assistant:</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>, message[<span class="string"><span class="delimiter">'</span><span class="content">content</span><span class="delimiter">'</span></span>])
    <span class="keyword">elif</span> message_type == <span class="string"><span class="delimiter">'</span><span class="content">function_call</span><span class="delimiter">'</span></span>:
        print(f<span class="string"><span class="delimiter">&quot;</span><span class="char">\n</span><span class="content">Function call: {message['function_name']} with arguments {message['arguments']}</span><span class="delimiter">&quot;</span></span>)
    <span class="keyword">elif</span> message_type == <span class="string"><span class="delimiter">'</span><span class="content">function_response</span><span class="delimiter">'</span></span>:
        print(f<span class="string"><span class="delimiter">&quot;</span><span class="char">\n</span><span class="content">Function response for {message['function_name']}: {message['response']}</span><span class="delimiter">&quot;</span></span>)
    <span class="keyword">else</span>:
        <span class="comment"># Handle any other message types or default case</span>
        print(message.get(<span class="string"><span class="delimiter">'</span><span class="content">content</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>))</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_calls_the_planner_o1_model">Calls the planner, o1 model.</h3>
<div class="paragraph">
<p>The response will be the plan that will be provided to the 4o-mini
helper.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="comment"># %%</span>
<span class="keyword">def</span> <span class="function">call_o1</span>(scenario):
    prompt = f<span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">
</span><span class="content">{o1_prompt}</span><span class="content">
</span><span class="content">
</span><span class="content">Scenario:</span><span class="content">
</span><span class="content">{scenario}</span><span class="content">
</span><span class="content">
</span><span class="content">Please provide the next steps in your plan.</span><span class="delimiter">&quot;&quot;&quot;</span></span>

    response = client.chat.completions.create(
        model=O1_MODEL,
        messages=[{<span class="string"><span class="delimiter">'</span><span class="content">role</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">user</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">content</span><span class="delimiter">'</span></span>: prompt}]
    )
    plan = response.choices[<span class="integer">0</span>].message.content

    <span class="keyword">return</span> plan</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_call_4o_mini_to_execute_the_plan">Call 4o-mini to execute the plan.</h3>
<div class="paragraph">
<p>This will loop until the plan is complete</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="keyword">def</span> <span class="function">call_gpt4o</span>(plan):
    gpt4o_policy_prompt = gpt4o_system_prompt.replace(<span class="string"><span class="delimiter">&quot;</span><span class="content">{policy}</span><span class="delimiter">&quot;</span></span>, plan)
    messages = [
        {<span class="string"><span class="delimiter">'</span><span class="content">role</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">system</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">content</span><span class="delimiter">'</span></span>: gpt4o_policy_prompt},
    ]

    <span class="keyword">while</span> <span class="predefined-constant">True</span>:
        response = client.chat.completions.create(
            model=GPT_MODEL,
            messages=messages,
            tools=TOOLS,
            parallel_tool_calls=<span class="predefined-constant">False</span>
        )

        assistant_message = response.choices[<span class="integer">0</span>].message.to_dict()
        print(assistant_message)
        messages.append(assistant_message)

        append_message({<span class="string"><span class="delimiter">'</span><span class="content">type</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">assistant</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">content</span><span class="delimiter">'</span></span>: assistant_message.get(<span class="string"><span class="delimiter">'</span><span class="content">content</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>)})

        <span class="keyword">if</span> (response.choices[<span class="integer">0</span>].message.tool_calls <span class="keyword">and</span>
            response.choices[<span class="integer">0</span>].message.tool_calls[<span class="integer">0</span>].function.name == <span class="string"><span class="delimiter">'</span><span class="content">instructions_complete</span><span class="delimiter">'</span></span>):
            <span class="keyword">break</span>

        <span class="keyword">if</span> <span class="keyword">not</span> response.choices[<span class="integer">0</span>].message.tool_calls:
            <span class="keyword">continue</span>

        <span class="keyword">for</span> tool <span class="keyword">in</span> response.choices[<span class="integer">0</span>].message.tool_calls:
            tool_id = tool.id
            function_name = tool.function.name
            input_arguments_str = tool.function.arguments

            append_message({<span class="string"><span class="delimiter">'</span><span class="content">type</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">tool_call</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">function_name</span><span class="delimiter">'</span></span>: function_name, <span class="string"><span class="delimiter">'</span><span class="content">arguments</span><span class="delimiter">'</span></span>: input_arguments_str})

            <span class="keyword">try</span>:
                input_arguments = json.loads(input_arguments_str)
            <span class="keyword">except</span> (<span class="exception">ValueError</span>, json.JSONDecodeError):
                <span class="keyword">continue</span>

            <span class="keyword">if</span> function_name <span class="keyword">in</span> function_mapping:
                <span class="keyword">try</span>:
                    function_response = function_mapping[function_name](**input_arguments)
                <span class="keyword">except</span> <span class="exception">Exception</span> <span class="keyword">as</span> e:
                    function_response = {<span class="string"><span class="delimiter">'</span><span class="content">error</span><span class="delimiter">'</span></span>: <span class="predefined">str</span>(e)}
            <span class="keyword">else</span>:
                function_response = {<span class="string"><span class="delimiter">'</span><span class="content">error</span><span class="delimiter">'</span></span>: f<span class="string"><span class="delimiter">&quot;</span><span class="content">Function '{function_name}' not implemented.</span><span class="delimiter">&quot;</span></span>}

            <span class="keyword">try</span>:
                serialized_output = json.dumps(function_response)
            <span class="keyword">except</span> (<span class="exception">TypeError</span>, <span class="exception">ValueError</span>):
                serialized_output = <span class="predefined">str</span>(function_response)

            messages.append({
                <span class="string"><span class="delimiter">&quot;</span><span class="content">role</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">tool</span><span class="delimiter">&quot;</span></span>,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">tool_call_id</span><span class="delimiter">&quot;</span></span>: tool_id,
                <span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span>: serialized_output
            })

            append_message({<span class="string"><span class="delimiter">'</span><span class="content">type</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">tool_response</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">function_name</span><span class="delimiter">'</span></span>: function_name, <span class="string"><span class="delimiter">'</span><span class="content">response</span><span class="delimiter">'</span></span>: serialized_output})

    <span class="keyword">return</span> messages</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_execution">Execution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>:</p>
</div>
<div class="paragraph">
<p>Example usage</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python">scenario_text = (<span class="string"><span class="delimiter">&quot;</span><span class="content">We just received a major shipment of new orders. </span><span class="delimiter">&quot;</span></span>
                 <span class="string"><span class="delimiter">&quot;</span><span class="content">Please generate a plan that gets the list of awaiting </span><span class="delimiter">&quot;</span></span>
                 <span class="string"><span class="delimiter">&quot;</span><span class="content">orders and determines the best policy to fulfill them.</span><span class="char">\n</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>
                 <span class="string"><span class="delimiter">&quot;</span><span class="content">The plan should include checking inventory, ordering </span><span class="delimiter">&quot;</span></span>
                 <span class="string"><span class="delimiter">&quot;</span><span class="content">necessary components from suppliers, scheduling production </span><span class="delimiter">&quot;</span></span>
                 <span class="string"><span class="delimiter">&quot;</span><span class="content">runs with available capacity, ordering new components </span><span class="delimiter">&quot;</span></span>
                 <span class="string"><span class="delimiter">&quot;</span><span class="content">required from suppliers, and arranging shipping to the </span><span class="delimiter">&quot;</span></span>
                 <span class="string"><span class="delimiter">&quot;</span><span class="content">retailers distribution center in Los Angeles. Notify </span><span class="delimiter">&quot;</span></span>
                 <span class="string"><span class="delimiter">&quot;</span><span class="content">the customer before completing.</span><span class="char">\n</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>
                 <span class="string"><span class="delimiter">&quot;</span><span class="content">Prioritize getting any possible orders out that you can </span><span class="delimiter">&quot;</span></span>
                 <span class="string"><span class="delimiter">&quot;</span><span class="content">while placing orders for any backlog items.</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Process the scenario</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python">messages = process_scenario(scenario_text)</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_print_messages">Print messages</h3>
<div class="paragraph">
<p>Note: Your results may differ from those in the video as the models
outputs may change with each run.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="keyword">for</span> x <span class="keyword">in</span> messages:
    print(x)
    print(<span class="string"><span class="delimiter">'</span><span class="char">\n</span><span class="char">\n</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_utils_py">utils.py</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="keyword">import</span> <span class="include">os</span>
<span class="keyword">import</span> <span class="include">json</span>
<span class="keyword">import</span> <span class="include">requests</span>

<span class="keyword">def</span> <span class="function">o1_tools</span>(messages,model,tools):

    url = <span class="string"><span class="delimiter">&quot;</span><span class="content">https://api.openai.com/v1/chat/completions</span><span class="delimiter">&quot;</span></span>
    headers = {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">Content-Type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">application/json</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">Authorization</span><span class="delimiter">&quot;</span></span>: f<span class="string"><span class="delimiter">&quot;</span><span class="content">Bearer {os.getenv('OPENAI_API_KEY')}</span><span class="delimiter">&quot;</span></span>
    }
    data = {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">model</span><span class="delimiter">&quot;</span></span>: model,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">messages</span><span class="delimiter">&quot;</span></span>: messages,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">tools</span><span class="delimiter">&quot;</span></span>: tools
    }

    response = requests.post(url, headers=headers, data=json.dumps(data))

    <span class="keyword">return</span> response.json()</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-01-12 11:38:55 +0200
</div>
</div>
</body>
</html>