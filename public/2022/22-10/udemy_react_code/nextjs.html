<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>26. A (Pretty Deep Dive) Introduction to Next.js</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>26. A (Pretty Deep Dive) Introduction to Next.js</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel2">
<li><a href="#_426_module_introduction">426. Module Introduction</a></li>
<li><a href="#_427_creating_a_nextjs_project">427. Creating a NextJS Project</a></li>
<li><a href="#_428_understanding_file_based_routing_react_server_components">428. Understanding File-based Routing &amp; React Server Components</a></li>
<li><a href="#_429_adding_another_route_via_the_filesystem">429. Adding Another Route via the Filesystem</a></li>
<li><a href="#_430_navigating_between_pages">430. Navigating Between Pages</a></li>
<li><a href="#_431_working_with_pages_layouts">431. Working with Pages &amp; Layouts</a></li>
<li><a href="#_432_reserved_file_names_custom_components_how_to_organize_a_nextjs_project">432. Reserved File Names, Custom Components &amp; How To Organize A NextJS Project</a></li>
<li><a href="#_433_reserved_filenames">433. Reserved Filenames</a></li>
<li><a href="#_434_configuring_dynamic_routes_using_route_parameters">434. Configuring Dynamic Routes &amp; Using Route Parameters</a></li>
<li><a href="#_435_onwards_to_the_main_project_the_foodies_app">435. Onwards to the Main Project - The Foodies App</a></li>
<li><a href="#_438_revisiting_the_concept_of_layouts">438. Revisiting The Concept Of Layouts</a></li>
<li><a href="#_439_adding_a_custom_component_to_a_layout">439. Adding a Custom Component To A Layout</a></li>
<li><a href="#_440_styling_nextjs_project_your_options_using_css_modules">440. Styling NextJS Project - Your Options &amp; Using CSS Modules</a></li>
<li><a href="#_441_optimizing_images_with_the_nextjs_image_component">441. Optimizing Images with the NextJS Image Component</a></li>
<li><a href="#_442_using_more_custom_components">442. Using More Custom Components</a></li>
<li><a href="#_443_populating_the_starting_page_content">443. Populating The Starting Page Content</a></li>
<li><a href="#_444_preparing_an_image_slideshow">444. Preparing an Image Slideshow</a></li>
<li><a href="#_445_react_server_components_vs_client_components_when_to_use_what">445. React Server Components vs Client Components - When To Use What</a></li>
<li><a href="#_446_using_client_components_efficiently">446. Using Client Components Efficiently</a></li>
<li><a href="#_447_outputting_meals_data_images_with_unknown_dimensions">447. Outputting Meals Data &amp; Images With Unknown Dimensions</a></li>
<li><a href="#_448_setting_up_a_sqlite_database">448. Setting Up A SQLite Database</a></li>
<li><a href="#_449_fetching_data_by_leveraging_nextjs_fullstack_capabilities">449. Fetching Data By Leveraging NextJS &amp; Fullstack Capabilities</a></li>
<li><a href="#_450_adding_a_loading_page">450. Adding A Loading Page</a></li>
<li><a href="#_451_using_suspense_streamed_responses_for_granular_loading_state_management">451. Using Suspense &amp; Streamed Responses For Granular Loading State Management</a></li>
<li><a href="#_452_handling_errors">452. Handling Errors</a></li>
<li><a href="#_453_handling_not_found_states">453. Handling Not Found States</a></li>
<li><a href="#_454_loading_rendering_meal_details_via_dynamic_routes_route_parameters">454. Loading &amp; Rendering Meal Details via Dynamic Routes &amp; Route Parameters</a></li>
<li><a href="#_455_throwing_not_found_errors_for_individual_meals">455. Throwing Not Found Errors For Individual Meals</a></li>
<li><a href="#_456_getting_started_with_the_share_meal_form">456. Getting Started with the Share Meal Form</a></li>
<li><a href="#_457_getting_started_with_a_custom_image_picker_input_component">457. Getting Started with a Custom Image Picker Input Component</a></li>
<li><a href="#_458_adding_an_image_preview_to_the_picker">458. Adding an Image Preview to the Picker</a></li>
<li><a href="#_460_introducing_using_server_actions_for_handling_form_submissions">460. Introducing &amp; Using Server Actions for Handling Form Submissions</a></li>
<li><a href="#_461_storing_server_actions_in_separate_files">461. Storing Server Actions in Separate Files</a></li>
<li><a href="#_462_creating_a_slug_sanitizing_user_input_for_xss_protection">462. Creating a Slug &amp; Sanitizing User Input for XSS Protection</a></li>
<li><a href="#_463_storing_uploaded_images_storing_data_in_the_database">463. Storing Uploaded Images &amp; Storing Data in the Database</a></li>
<li><a href="#_464_managing_the_form_submission_status_with_useformstatus">464. Managing the Form Submission Status with useFormStatus</a></li>
<li><a href="#_465_adding_server_side_input_validation">465. Adding Server-Side Input Validation</a></li>
<li><a href="#_466_working_with_server_action_responses_useformstate">466. Working with Server Action Responses &amp; useFormState</a></li>
<li><a href="#_467_building_for_production_understanding_nextjs_caching">467. Building For Production &amp; Understanding NextJS Caching</a></li>
<li><a href="#_468_triggering_cache_revalidations">468. Triggering Cache Revalidations</a></li>
<li><a href="#_469_dont_store_files_locally_on_the_filesystem">469. Don&#8217;t Store Files Locally On The Filesystem!</a></li>
<li><a href="#_471_adding_static_metadata">471. Adding Static Metadata</a></li>
<li><a href="#_472_adding_dynamic_metadata">472. Adding Dynamic Metadata</a></li>
<li><a href="#_473_module_summary">473. Module Summary</a></li>
<li><a href="#_474_about_the_nextjs_pages_router">474. About the NextJS Pages Router</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="udemy_react.html">&lt;Contents&gt;</a></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">Getting Started with Next.js</dt>
<dd>
<p><a href="https://nextjs.org/docs/app/getting-started/installation" class="bare">https://nextjs.org/docs/app/getting-started/installation</a></p>
</dd>
<dt class="hdlist1">v0</dt>
<dd>
<p><a href="https://v0.dev/" class="bare">https://v0.dev/</a></p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_426_module_introduction">426. Module Introduction</h3>
<div class="paragraph">
<p>This section of the course introduces building a new React project with a focus on creating a fullstack application using NextJS, a React framework. The project allows users to view and share meals within a foodies community. Unlike previous lessons, this project combines both front-end and backend elements. You&#8217;ll learn about NextJS, its benefits, and how to set up routes, pages, and work with React components within this framework. The section will cover data fetching and sending, styling, working with images, and page metadata, enhancing your React skills to create fullstack applications.</p>
</div>
</div>
<div class="sect2">
<h3 id="_427_creating_a_nextjs_project">427. Creating a NextJS Project</h3>
<div class="paragraph">
<p>The content explains how to set up a new Next.js project, highlighting the differences from standard React projects. It suggests using the command <code>npx create-next-app</code> to create a project with Next.js pre-installed and outlines the initial setup process, including optional configurations like TypeScript, ESLint, and Tailwind CSS. The instructor opts out of using TypeScript and Tailwind to simplify the course content. After the project is created, they replace some default files with customized ones and provide a starting snapshot for learners to use, either through local files or CodeSandbox. Finally, they guide users on running the project using <code>npm run dev</code> to start the development server, noting that CodeSandbox automates this process.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>npm run dev</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_428_understanding_file_based_routing_react_server_components">428. Understanding File-based Routing &amp; React Server Components</h3>
<div class="paragraph">
<p>The text explains the role of the <code>app</code> folder in a modern NextJS project, particularly focusing on the <code>Page.js</code> file within it. The <code>Page.js</code> file is important because it designates a React component as a page in NextJS, and it functions as a server component. This means the component is executed on the server, not the client side, which is a unique feature of NextJS compared to traditional React. Logs from the component are visible in the server terminal, not the browser console, demonstrating its server-side execution. The server component&#8217;s JSX code is then sent to the client&#8217;s browser to be rendered as HTML, making it visible on the screen.</p>
</div>
</div>
<div class="sect2">
<h3 id="_429_adding_another_route_via_the_filesystem">429. Adding Another Route via the Filesystem</h3>
<div class="paragraph">
<p>The document explains how to add a new page to a Next.js website using server components. In Next.js, rather than using React Router, you create new pages by adding folders with a <code>page.js</code> file inside the <code>app</code> directory. For example, to create a page accessible at <code>localhost:3000/about</code>, you would create an <code>about</code> folder in the <code>app</code> directory and include a <code>page.js</code> file within it. This file should export a function returning the JSX content that will be rendered on the page. The folder structure is crucial because Next.js uses it to define routes. Once set up, visiting the <code>/about</code> route will display the content specified in the <code>about</code> page&#8217;s component.</p>
</div>
</div>
<div class="sect2">
<h3 id="_430_navigating_between_pages">430. Navigating Between Pages</h3>
<div class="paragraph">
<p>The provided text explains how to enhance navigation between pages in a NextJS application without losing the single-page application (SPA) benefits. Initially, a traditional anchor element is used to link to a new page, causing a full page reload and breaking the SPA model by downloading a new page from the backend. To maintain the SPA experience, the text suggests using the <code>Link</code> component from <code>next/link</code>, which allows navigation without fully reloading the page. This component ensures that while the content is pre-rendered on the server, it updates on the client side with JavaScript, providing a seamless, interactive user experience.</p>
</div>
</div>
<div class="sect2">
<h3 id="_431_working_with_pages_layouts">431. Working with Pages &amp; Layouts</h3>
<div class="paragraph">
<p>The provided content explains the structure and purpose of layout and page JS files in a Next.js project. The page JS file defines the content of a specific page, while the layout JS file acts as a shell or wrapper for one or more pages. A root layout JS file is necessary at the top of the app folder, and additional nested layout files can be added for specific sections like an "about" folder. The layout file exports a React component that uses the children prop to render page content between HTML and body tags, setting up the basic HTML skeleton. The head element, typically used for metadata like titles, is not included directly in layout files because Next.js allows metadata to be set via a special reserved variable called "metadata." This way, the metadata applies to all pages covered by the layout. The children prop represents the content of the currently active page, illustrating how layout and page JS files work together, with layout providing the structure and page offering the content.</p>
</div>
</div>
<div class="sect2">
<h3 id="_432_reserved_file_names_custom_components_how_to_organize_a_nextjs_project">432. Reserved File Names, Custom Components &amp; How To Organize A NextJS Project</h3>
<div class="paragraph">
<p>The provided text explains the setup and organization of a NextJS project, focusing on file structure and component management. It highlights the use of a <code>globals.css</code> file for global styles across all pages by importing it in <code>layout.js</code>, and mentions the special <code>icon.png</code> file for setting a favicon without explicit configuration in <code>layout.js</code>. The text describes creating routes through folders and reserved filenames like <code>page.js</code> and <code>layout.js</code>, and discusses adding regular React components that aren&#8217;t automatically treated as pages. It suggests organizing components in a <code>components</code> folder, either inside or outside the <code>app</code> directory, and emphasizes the importance of <code>page.js</code> for routing. Additionally, it mentions using an <code>@</code> symbol in import paths for convenience, as configured in a <code>jsconfig</code> file, to simplify imports by referencing the root project folder. The text recommends consulting the official NextJS documentation for structuring projects and concludes with a preference for keeping components outside the <code>app</code> folder for a cleaner routing-focused structure.</p>
</div>
</div>
<div class="sect2">
<h3 id="_433_reserved_filenames">433. Reserved Filenames</h3>
<div class="paragraph">
<p>In NextJS, certain filenames are reserved when used inside the <code>app/</code> folder (or any subfolders). These reserved filenames include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>page.js</code>: Creates a new page (e.g., <code>app/about/page.js</code> for <code>&lt;your-domain&gt;/about</code>).</p>
</li>
<li>
<p><code>layout.js</code>: Sets up a layout wrapping sibling and nested pages.</p>
</li>
<li>
<p><code>not-found.js</code>: Serves as a fallback for "Not Found" errors.</p>
</li>
<li>
<p><code>error.js</code>: Acts as a fallback for other errors.</p>
</li>
<li>
<p><code>loading.js</code>: Displays while sibling or nested pages (or layouts) are fetching data.</p>
</li>
<li>
<p><code>route.js</code>: Creates an API route, returning data instead of JSX (e.g., JSON format).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These filenames have specific purposes and are only treated specially within the <code>app/</code> folder. For more details, refer to the official documentation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_434_configuring_dynamic_routes_using_route_parameters">434. Configuring Dynamic Routes &amp; Using Route Parameters</h3>
<div class="paragraph">
<p>The text provides a detailed explanation of setting up dynamic routes in a NextJS application, particularly for a blog with multiple posts. It describes the process of creating a scalable and maintainable routing structure, emphasizing the use of dynamic routes to handle multiple posts without manually creating a new folder for each post. This is achieved using a special syntax in NextJS, where square brackets are used to create a placeholder (e.g., <code>[slug]</code>) for dynamic segments in the URL. This allows the same page component to render different content based on the URL path segment values. The text also explains how NextJS automatically passes a <code>params</code> prop containing these dynamic segment values, which can be used to fetch specific content like blog posts from a database. The explanation hints at further capabilities of NextJS, such as custom error handling and data fetching, which will be explored in a future project focused on a Meals app.</p>
</div>
</div>
<div class="sect2">
<h3 id="_435_onwards_to_the_main_project_the_foodies_app">435. Onwards to the Main Project - The Foodies App</h3>
<div class="paragraph">
<p>The text describes a new project, a foodies app, which is set up in both local and CodeSandbox versions. The project has been simplified by removing previously created pages and includes a new assets folder with necessary images. Updates have been made to styles, and the layout and page JavaScript files. Notably, the layout JavaScript file now includes an SVG graphic for aesthetic purposes, to be displayed behind the website&#8217;s header. This project is prepared and ready for further work.</p>
</div>
</div>
<div class="sect2">
<h3 id="_438_revisiting_the_concept_of_layouts">438. Revisiting The Concept Of Layouts</h3>
<div class="paragraph">
<p>The content provides a detailed explanation of how layouts function in NextJS, particularly focusing on creating and utilizing a root layout and nested layouts. The author intends to enhance a webpage by adding a proper header, navigation, and logo using the <code>layout.js</code> file. In NextJS, layouts serve as wrappers around pages and can be nested for more specialized layouts. The root layout remains active across all pages, while nested layouts apply only to specific subsets, like meals-related pages in this example. The explanation includes using React components and the <code>children</code> prop to manage content within layouts. Although a nested layout was demonstrated, it was deemed unnecessary for the current task, so the focus shifted to updating the root layout to include a universal header for navigation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_439_adding_a_custom_component_to_a_layout">439. Adding a Custom Component To A Layout</h3>
<div class="paragraph">
<p>The text describes the process of creating a new header component in a Next.js project. The author explains the steps for adding a "MainHeader" component to manage a shared header across all pages. This involves creating a separate file named <code>main-header.js</code> and exporting a React component called <code>MainHeader</code>. The component includes a clickable logo, using Next.js&#8217;s <code>Link</code> component, and a navigation menu with links to different pages. The author emphasizes the flexibility in organizing component files and chooses to keep them outside the app folder for clarity. They also mention importing images in Next.js projects, highlighting the need to access the <code>src</code> property. Finally, the component is integrated into the root layout, and although the header is functional, it requires styling to improve its appearance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_440_styling_nextjs_project_your_options_using_css_modules">440. Styling NextJS Project - Your Options &amp; Using CSS Modules</h3>
<div class="paragraph">
<p>The provided text explains various methods for styling NextJS projects, focusing on CSS options. Initially, it discusses using global CSS files, which apply styles across all pages when imported into the root <code>layout.js</code> file. Another popular option is Tailwind CSS, a utility-first CSS framework that allows styling through small utility classes; however, it&#8217;s not used in this project to keep the focus on NextJS and React. Instead, CSS modules are chosen, offering a way to scope styles to specific components by using files ending in <code>.module.css</code>. These modules prevent styles from affecting other components, even with similar class names. The process involves importing these CSS module files into component files and using the imported object to access and apply the styles. The text concludes by demonstrating how this method results in a well-styled header, logo, and navigation links in the project.</p>
</div>
</div>
<div class="sect2">
<h3 id="_441_optimizing_images_with_the_nextjs_image_component">441. Optimizing Images with the NextJS Image Component</h3>
<div class="paragraph">
<p>The content discusses optimizing image handling in a NextJS project by using the built-in NextJS image component instead of the default HTML image element. The NextJS image component provides several benefits, such as lazy loading, responsive image setup, automatic size detection, and serving images in optimal formats like WebP for different browsers. It simplifies image management without additional configuration. The component also allows customization, such as prioritizing image loading to prevent content shift during page load. The text encourages exploring further options and configurations for advanced use cases, like loading images from third-party sources.</p>
</div>
</div>
<div class="sect2">
<h3 id="_442_using_more_custom_components">442. Using More Custom Components</h3>
<div class="paragraph">
<p>The text describes the process of refactoring a web application&#8217;s header background into a separate component for better organization and practice. The steps include creating a new JavaScript file (<code>main-header-background.js</code>) for the component, extracting the relevant HTML and CSS into separate module files, and adjusting the CSS to work with modules. The component is then integrated back into the application within <code>main-header.js</code> instead of <code>layout.js</code>, and all related files are organized into a <code>main-header</code> subfolder within the <code>components</code> directory. Path updates are also made to ensure the application functions as expected. This organization improves code maintainability and clarity.</p>
</div>
</div>
<div class="sect2">
<h3 id="_443_populating_the_starting_page_content">443. Populating The Starting Page Content</h3>
<div class="paragraph">
<p>The content describes the process of updating the main page content in a <code>page.js</code> file located in the root of the app folder. The aim is to replace existing content with a new layout that includes a page-specific header and main section. The header will contain a nested header introducing the page, a <code>div</code> for an image slideshow, and another <code>div</code> with two inner <code>divs</code> for a hero section and a call-to-action (CTA) section. The hero section will have an <code>h1</code> title and a marketing paragraph, while the CTA section will contain links for users to join a community and explore meals. CSS modules are used for styling, and the file includes a <code>page.module.css</code> for this purpose. The main section will temporarily hold dummy text. The description also notes that a prepared <code>page.js</code> file is available for use, and the next step will be to work on the image slideshow.</p>
</div>
</div>
<div class="sect2">
<h3 id="_444_preparing_an_image_slideshow">444. Preparing an Image Slideshow</h3>
<div class="paragraph">
<p>The statement discusses the process of adding an image slideshow to a web project using React and Next.js. The plan is to create a new component for the slideshow to keep the main file lean. This component will be placed in a new subfolder within the components folder, specifically named <code>image-slideshow.js</code>, along with a CSS module file for styling.</p>
</div>
<div class="paragraph">
<p>The JavaScript file will use React&#8217;s <code>useState</code> and <code>useEffect</code> hooks to manage the slideshow&#8217;s state, changing the visible image every five seconds using <code>setInterval</code>. The images are imported from an assets folder and displayed using Next.js&#8217;s image component.</p>
</div>
<div class="paragraph">
<p>However, while attempting to integrate this component into the main page, an error occurs. The error indicates a conflict between client and server components in Next.js because the slideshow component requires <code>useState</code> (a client-side feature) but is being used within a server component context. This highlights the need to mark components correctly in Next.js to handle client-side functionality.</p>
</div>
</div>
<div class="sect2">
<h3 id="_445_react_server_components_vs_client_components_when_to_use_what">445. React Server Components vs Client Components - When To Use What</h3>
<div class="paragraph">
<p>The text explains the distinction between Server and Client components in NextJS, a full-stack framework built on React. Unlike standard React applications that run purely on the client side, NextJS utilizes Server components that are rendered on the server before being sent to the client. This approach can enhance performance and improve search engine optimization by delivering complete HTML content to web crawlers. However, Client components, necessary for features like state management and event handling, are also supported in NextJS. They must be explicitly defined using the <code>use client</code> directive, enabling client-side features such as hooks and event handlers. Understanding these component types is crucial for effectively leveraging NextJS&#8217;s capabilities.</p>
</div>
</div>
<div class="sect2">
<h3 id="_446_using_client_components_efficiently">446. Using Client Components Efficiently</h3>
<div class="paragraph">
<p>The provided text details the process of updating a community page and improving navigation functionality within a project using NextJS. First, the community page is populated with dummy content by replacing existing files with attached <code>page.js</code> and <code>page.module.css</code> files. A <code>community</code> component is used to display placeholder text and images. The main focus of the project will be on meal-related logic, which will be addressed later.</p>
</div>
<div class="paragraph">
<p>The navigation header is improved by highlighting the active page link. This is achieved by adding a CSS class conditionally based on the current path. The <code>usePathname</code> hook from NextJS is used to determine the active path. A new <code>NavLink</code> component is created to handle the active link logic, ensuring only necessary parts are rendered as client components. This keeps the majority of the components as server components, maintaining server-side rendering advantages. CSS classes are adjusted and imported to style the links properly. By segmenting client-side rendering to specific components, the project maintains optimal performance while enhancing navigation user experience.</p>
</div>
</div>
<div class="sect2">
<h3 id="_447_outputting_meals_data_images_with_unknown_dimensions">447. Outputting Meals Data &amp; Images With Unknown Dimensions</h3>
<div class="paragraph">
<p>The content outlines a development plan for a Meals page in a web application. Initially, the team has worked on the starting and community pages, as well as the header. The focus is now on the Meals page, which will eventually allow users to share meals. The task involves setting up the page structure with a header and main section, and importing necessary styles from a CSS module. The header includes a title, a paragraph, and a link to a share page for users to contribute recipes.</p>
</div>
<div class="paragraph">
<p>A new component, <code>MealsGrid</code>, is introduced to display meal items in a grid format. This component will map through meal data, outputting each meal as a list item with a unique key (<code>meal.id</code>). Styles for this component are managed via a CSS module. Another component, <code>MealItem</code>, is created to display details of each meal, including dynamic links to meal detail pages and images. The images, stored in a database, will use the Next.js Image component with a <code>fill</code> prop to handle dynamic dimensions since their sizes are unknown at build time.</p>
</div>
<div class="paragraph">
<p>The <code>MealsGrid</code> component is integrated into the Meals page, though initially, it displays no meals due to the absence of a data source. Future steps will involve populating this component with actual meal data.</p>
</div>
</div>
<div class="sect2">
<h3 id="_448_setting_up_a_sqlite_database">448. Setting Up A SQLite Database</h3>
<div class="paragraph">
<p>The process described involves setting up a local SQLite database to store meal data for a meals grid component in a development environment. Here&#8217;s a summary:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Purpose</strong>: To display meals on a screen, a database is needed to store meal information, including dummy data and user-shared meals.</p>
</li>
<li>
<p><strong>Setup</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Stop the development server using <code>Ctrl + C</code>.</p>
</li>
<li>
<p>Install the <code>better-sqlite3</code> package using <code>NPM install</code>. This package allows interaction with a SQLite database, which is chosen for its simplicity and local setup.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Database Initialization</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>An <code>initdb.js</code> file is prepared to create and initialize the database with dummy meal data.</p>
</li>
<li>
<p>The file creates a new database or uses an existing one and sets up a table with fields like ID, slug, title, image path, summary, instructions, creator&#8217;s name, and email.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Data Insertion</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>The <code>initdb.js</code> file uses the installed package to execute a function that populates the database with dummy meal entries.</p>
</li>
<li>
<p>The <code>prepare</code> function from <code>better-sqlite3</code> is used for this purpose.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Execution</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Run the <code>initdb.js</code> script using <code>node</code> to generate the <code>meals DB</code> file.</p>
</li>
<li>
<p>This database will then be used to load meals onto the meals page.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The next step involves figuring out how to load meals from this database onto the meals page.</p>
</div>
</div>
<div class="sect2">
<h3 id="_449_fetching_data_by_leveraging_nextjs_fullstack_capabilities">449. Fetching Data By Leveraging NextJS &amp; Fullstack Capabilities</h3>
<div class="paragraph">
<p>The content discusses data loading in a Next.js application, highlighting its server-side capabilities. Unlike vanilla React, Next.js combines backend and frontend, allowing direct database access without useEffect or fetch requests. The example involves setting up a database connection using the better SQLite3 package and creating a function to fetch data from a database. The explanation includes converting functions to async for handling promises and simulating delays, which is beneficial for managing loading states. It also covers passing data to components without <code>useEffect</code>. A minor styling error is noted, and the document concludes with an overview of how data and images are fetched and displayed in the application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_450_adding_a_loading_page">450. Adding A Loading Page</h3>
<div class="paragraph">
<p>The content discusses how to improve user experience when loading pages in a web application using NextJS. Initially, when accessing a meals page, there&#8217;s a noticeable delay due to a forced two-second wait implemented in the data fetching function. However, NextJS caches pages, so revisiting them is faster. To enhance the experience during the initial load, a loading indicator can be added. This is achieved by creating a <code>loading.js</code> file, which displays a message (e.g., "Fetching meals&#8230;&#8203;") while data is being loaded. This provides immediate feedback to users, indicating that their navigation request is processing, thus improving the overall user experience. Basic styling for this indicator is handled with a <code>loading.module.css</code> file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_451_using_suspense_streamed_responses_for_granular_loading_state_management">451. Using Suspense &amp; Streamed Responses For Granular Loading State Management</h3>
<div class="paragraph">
<p>The text discusses improving the user experience on a NextJS meals page by handling loading states more effectively. Initially, the loading text occupies the entire screen, which is not ideal since the header can be displayed immediately without waiting for data. The proposed solution involves using React&#8217;s <code>Suspense</code> component to manage loading states. By moving data fetching to a separate component and wrapping it with <code>Suspense</code>, it allows displaying fallback content while data loads. This approach avoids using the <code>loading.js</code> file that applies to all nested layouts, enabling more granular control. The text also explains how this method partially renders the page, loading visible content first and streaming in data as it becomes available, enhancing the user experience.</p>
</div>
</div>
<div class="sect2">
<h3 id="_452_handling_errors">452. Handling Errors</h3>
<div class="paragraph">
<p>The content explains how to handle errors in a Next.js application using an <code>error.js</code> file. The <code>error.js</code> file is a special component that can be added to the app folder to manage potential errors in pages and components, such as data loading failures. It can be placed at different levels of the application to catch errors either globally or within specific parts of the app. The error component must be a client component and can access props that provide details about the error, though sensitive information is hidden for security. The explanation includes a practical example of simulating an error by throwing one in a <code>meals.js</code> file and then handling it with a custom error page, which can be further customized. After demonstrating error handling, the simulated error is commented out to restore normal functionality.</p>
</div>
</div>
<div class="sect2">
<h3 id="_453_handling_not_found_states">453. Handling Not Found States</h3>
<div class="paragraph">
<p>The provided content discusses handling invalid URLs in an application. When a user enters a URL that is not supported, a default 404 error page appears. The text explains how to customize this page by adding a <code>not-found.js</code> file in the app folder. This file can be placed at the root level to handle all not-found errors globally or nested for more specific error handling. The example demonstrates exporting a <code>NotFound</code> function that returns HTML with a custom message using a CSS class defined in <code>globals.css</code>. This change allows for a tailored "Not Found" page for invalid URLs. The content then transitions to the next task of enabling browsing of meal details within the application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_454_loading_rendering_meal_details_via_dynamic_routes_route_parameters">454. Loading &amp; Rendering Meal Details via Dynamic Routes &amp; Route Parameters</h3>
<div class="paragraph">
<p>The content describes the process of setting up a Meal Details page in a Next.js application. It involves working within a <code>meals</code> folder, specifically the <code>mealSlug</code> dynamic segment, to create a <code>page.js</code> file responsible for displaying meal details. The page structure includes a header and a main section, styled using a <code>page.module.css</code> file.</p>
</div>
<div class="paragraph">
<p>Key tasks include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creating a header with a meal image and title, using Next.js&#8217;s <code>Image</code> component and dynamically setting properties like <code>src</code> and <code>alt</code>.</p>
</li>
<li>
<p>Adding creator information with a <code>mailto</code> link, dynamically generating the email address.</p>
</li>
<li>
<p>Providing a summary and instructions section, using <code>dangerouslySetInnerHTML</code> to render HTML content safely.</p>
</li>
<li>
<p>Implementing a <code>getMeal</code> async function to fetch meal data from a database, using parameterized queries to prevent SQL injection.</p>
</li>
<li>
<p>Utilizing Next.js&#8217;s special <code>params</code> prop to access URL segments for fetching meal data.</p>
</li>
<li>
<p>Handling promises correctly by removing the <code>async</code> keyword when it&#8217;s unnecessary for the <code>getMeal</code> function.</p>
</li>
<li>
<p>Displaying fetched data, including handling string replacements for formatting issues like line breaks in the instructions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The approach ensures a secure and efficiently loaded Meal Details page, fetching and displaying data dynamically from a database.</p>
</div>
</div>
<div class="sect2">
<h3 id="_455_throwing_not_found_errors_for_individual_meals">455. Throwing Not Found Errors For Individual Meals</h3>
<div class="paragraph">
<p>The text discusses improving user experience when a requested meal does not exist in a web application. Instead of displaying a generic error page, the author suggests checking if the meal is undefined and then displaying a more user-friendly "not found" page. This can be achieved by using the <code>notFound</code> function from NextJS&#8217;s <code>next/navigation</code> module, which displays the nearest <code>not-found</code> page or <code>error</code> page. The author recommends creating a meal-specific not-found message to inform users that the requested meal or page data could not be found, providing a clearer and more helpful response.</p>
</div>
</div>
<div class="sect2">
<h3 id="_456_getting_started_with_the_share_meal_form">456. Getting Started with the Share Meal Form</h3>
<div class="paragraph">
<p>The statement discusses the process of enhancing a meal management application by adding functionality to allow users to add their own meals. The focus is on a specific file, <code>page.js</code>, located in the meals folder, which is responsible for displaying the relevant page. A pre-prepared version of this file is provided, which includes a header, a form with various input fields, and an image picker for uploading images. Although the form is not yet functional for submissions, a CSS file for styling is also provided. The next steps involve working on the image picker and eventually enabling form submission functionality.</p>
</div>
</div>
<div class="sect2">
<h3 id="_457_getting_started_with_a_custom_image_picker_input_component">457. Getting Started with a Custom Image Picker Input Component</h3>
<div class="paragraph">
<p>The provided content outlines the process of creating an Image Picker component in a React application. The component is built to allow users to attach and upload images via a form. It involves creating a separate component file <code>image-picker.js</code> and a CSS module for styling. The Image Picker component includes a label and a file input element, which accepts only image files (<code>image/png</code> or <code>image/jpeg</code>). The component hides the default file input and uses a custom button to trigger the file selection, utilizing React&#8217;s <code>useRef</code> hook to handle button clicks and input interactions. The component is marked with the <code>use client</code> directive to enable client-side interactions, such as clicking events. Finally, the goal is to enhance the component by adding a feature to preview the selected image.</p>
</div>
</div>
<div class="sect2">
<h3 id="_458_adding_an_image_preview_to_the_picker">458. Adding an Image Preview to the Picker</h3>
<div class="paragraph">
<p>The content describes the process of creating an image picker component in React that updates the UI to display a preview of the selected image. It involves handling the image selection event, using a state hook to manage the selected image, and converting the image file into a data URL using the FileReader class. This enables the image to be displayed as a preview. The implementation checks if a file is selected, reads it as a data URL, and updates the state to show the preview using the Next.js Image component. The component is designed to handle a single image selection and provides feedback if no image is selected. Once set up, the functionality allows users to pick an image and see an immediate preview before form submission.</p>
</div>
</div>
<div class="sect2">
<h3 id="_460_introducing_using_server_actions_for_handling_form_submissions">460. Introducing &amp; Using Server Actions for Handling Form Submissions</h3>
<div class="paragraph">
<p>The content discusses implementing form submissions in a full-stack application using Next.js. Instead of traditional methods in React, where data is manually collected and sent to a backend on form submission, Next.js offers a more efficient approach using Server Actions. This involves creating a function within the component holding the form and using the 'use server' directive to ensure the function executes on the server. This Server Action is set as the form&#8217;s action prop, enabling automatic handling of the form submission on the server side. The form data, including input fields like title, summary, and image, is collected using the formData object. The document also explains how to extract and potentially store this data, although the storage implementation is not detailed. The process allows for seamless form handling without reloading the page, as evidenced by logging the data to the console on the server side.</p>
</div>
</div>
<div class="sect2">
<h3 id="_461_storing_server_actions_in_separate_files">461. Storing Server Actions in Separate Files</h3>
<div class="paragraph">
<p>The text explains how to properly implement server actions in a web application, specifically when using components that interact with server-side logic. It points out that server actions cannot be included directly in client components due to technical restrictions in build processes like that of NextJS. Instead, server actions should be stored in separate files marked with a "Use Server" directive at the top. This way, server-side functions are kept separate from client-side components, helping prevent security issues and build errors. The server actions can then be imported into client components as needed, allowing for a clean separation of client and server logic. The explanation concludes by emphasizing the importance of storing data properly, such as saving meal information to a database and images to a file system, instead of merely logging them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_462_creating_a_slug_sanitizing_user_input_for_xss_protection">462. Creating a Slug &amp; Sanitizing User Input for XSS Protection</h3>
<div class="paragraph">
<p>The content describes a process for adding a new function to a JavaScript file, <code>meals.js</code>, which handles storing meal data. This involves creating a <code>saveMeal</code> function that takes a meal object as input. The function includes several steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Slug Generation</strong>: A unique slug is generated from the meal&#8217;s title using the <code>slugify</code> package, which converts strings into URL-friendly slugs.</p>
</li>
<li>
<p><strong>Security Considerations</strong>: The <code>xss</code> package is used to sanitize user-generated content, specifically the meal instructions, to protect against cross-site scripting (XSS) attacks. This is important since the data will be output as HTML, making the application vulnerable to such attacks.</p>
</li>
<li>
<p><strong>Package Installation</strong>: The development server is stopped to install the <code>slugify</code> and <code>xss</code> packages to support these operations.</p>
</li>
<li>
<p><strong>Data Preparation</strong>: The slug is added to the meal object, and instructions are sanitized before storing the meal data, except for handling the image data, which is not covered in the content provided.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_463_storing_uploaded_images_storing_data_in_the_database">463. Storing Uploaded Images &amp; Storing Data in the Database</h3>
<div class="paragraph">
<p>The content describes a process for handling image uploads in a web application. Instead of storing images directly in a database, which is inefficient for performance, the images are stored in a public folder on the file system. The steps involve extracting the file extension, generating a unique filename, and using Node.js&#8217;s file system API to write the image to the designated folder. The image path is then stored in the database rather than the image itself. The content also outlines how to prepare and execute SQL statements securely to prevent SQL injection attacks. Once the image is uploaded and data is stored, the application redirects the user to a different page to enhance user experience. The process ensures efficient storage and retrieval of images while maintaining database integrity.</p>
</div>
</div>
<div class="sect2">
<h3 id="_464_managing_the_form_submission_status_with_useformstatus">464. Managing the Form Submission Status with useFormStatus</h3>
<div class="paragraph">
<p>The content describes a process of enhancing the user experience in a web application by providing immediate feedback during form submission. The solution involves using a React hook, <code>useFormStatus</code>, which provides the status of a form submission. The challenge is to avoid turning the entire page into a client component while still updating the button text to indicate that a request is being processed. The solution is to create a new component, <code>MealsFormSubmit</code>, which uses the <code>useFormStatus</code> hook to conditionally update the button text to "Submitting" and disable it during the submission process. This component is then used to replace the existing button in the form. As a result, users receive real-time feedback while their data is being submitted, improving the overall experience.</p>
</div>
</div>
<div class="sect2">
<h3 id="_465_adding_server_side_input_validation">465. Adding Server-Side Input Validation</h3>
<div class="paragraph">
<p>The text discusses the importance of validating user input for form submissions both on the client and server sides. While client-side validation can prevent empty form submissions using HTML attributes, it can be bypassed by users who manipulate the page through developer tools. Therefore, server-side validation is crucial to ensure data integrity. The process involves checking if fields are populated and valid, such as ensuring text fields aren&#8217;t empty after trimming whitespace and verifying that an email contains an "@" symbol. Additionally, it involves checking file uploads for validity. If any input is invalid, an error is thrown, though this approach isn&#8217;t ideal as it discards user input, suggesting a better method would be to display error messages on the same page to improve user experience.</p>
</div>
</div>
<div class="sect2">
<h3 id="_466_working_with_server_action_responses_useformstate">466. Working with Server Action Responses &amp; useFormState</h3>
<div class="paragraph">
<p>The text explains how to handle validation errors in a more elegant way using Server Actions and the <code>useFormState</code> hook in React. Instead of redirecting or throwing errors, you can return serializable response objects from Server Actions, which can be accessed in your components. The <code>useFormState</code> hook, which is similar to React&#8217;s <code>useState</code>, helps manage the state of a form that uses Server Actions. It requires two arguments: the Server Action to be triggered (e.g., <code>shareMeal</code>) and the initial state of the component. This hook returns an array with two elements: the current state and a form action. The form action must be set as the value for the form&#8217;s <code>action</code> prop, allowing <code>useFormState</code> to manage the component&#8217;s state based on Server Action responses. The text also highlights the need to adjust the shape of the Server Action to accept two parameters and to ensure that <code>useFormState</code> is executed in a client component by using <code>use client</code>. This setup enables you to display error messages on the form based on the response returned by the Server Action.</p>
</div>
</div>
<div class="sect2">
<h3 id="_467_building_for_production_understanding_nextjs_caching">467. Building For Production &amp; Understanding NextJS Caching</h3>
<div class="paragraph">
<p>The content discusses a problem encountered when transitioning a Next.js application from development to production. During development, everything works fine using a development server, but issues arise in production due to Next.js&#8217;s aggressive caching and pre-rendering strategies. When the application is built for production using <code>npm run build</code>, Next.js pre-generates pages that can be pre-rendered, such as non-dynamic pages. This results in faster initial load times, as the pages are cached and instantly available to users. However, the downside is that dynamic content, like newly added meals in this application, does not get re-fetched or updated in real-time, leading to missing data. The caching mechanism prevents the re-execution of code that fetches dynamic data, which causes discrepancies between the development and production environments. This behavior is problematic as it doesn&#8217;t reflect real-time changes in the data presented to users.</p>
</div>
</div>
<div class="sect2">
<h3 id="_468_triggering_cache_revalidations">468. Triggering Cache Revalidations</h3>
<div class="paragraph">
<p>To address the issue of NextJS caching too aggressively, you can use the built-in function <code>revalidatePath</code>. This function allows NextJS to clear and revalidate the cache associated with specific route paths whenever data changes, such as when a new meal is added. By default, only the specified path is revalidated, but if you have nested paths relying on the same data, you need to revalidate those separately or set the second argument to <code>layout</code> to revalidate the entire layout, including nested pages. Revalidating means NextJS discards the old cache for those pages, ensuring updated data is reflected. For instance, revalidating <code>/meals</code> after adding a meal ensures the meals page reflects the new data. Running <code>npm run build</code> and <code>npm start</code> again will rebuild and cache the pages, but the cache will be correctly revalidated upon adding new data. This process ensures that dynamic content updates correctly without over-caching issues.</p>
</div>
</div>
<div class="sect2">
<h3 id="_469_dont_store_files_locally_on_the_filesystem">469. Don&#8217;t Store Files Locally On The Filesystem!</h3>
<div class="paragraph">
<p>The content explains an issue with missing images when running a NextJS production server. The images were stored in a public folder, which is accessible during development but ignored in production because the server uses a .next folder instead. This means images added after deployment won&#8217;t be recognized. The recommended solution, as per NextJS documentation, is to use external file storage services like AWS S3 for files generated at runtime. However, implementing AWS S3 is considered beyond the course&#8217;s scope, but additional resources are provided for those interested in learning how to use it for storing and serving user-generated images.</p>
</div>
</div>
<div class="sect2">
<h3 id="_471_adding_static_metadata">471. Adding Static Metadata</h3>
<div class="paragraph">
<p>The content discusses finalizing an application by fixing a styling error in the CSS, which had already been corrected in previous attachments. The main focus then shifts to adding metadata to web pages using NextJS. It explains how metadata constants are used in the root <code>layout.js</code> file to provide search engine and social media visibility. The metadata fields, such as title and description, can be set globally in the layout or specifically for individual pages, with precedence given to page-specific metadata. The text also touches on the challenge of adding metadata to dynamic pages, where static metadata does not suffice.</p>
</div>
</div>
<div class="sect2">
<h3 id="_472_adding_dynamic_metadata">472. Adding Dynamic Metadata</h3>
<div class="paragraph">
<p>The text describes how to add metadata to dynamic pages in Next.js by using an async function called <code>generateMetadata</code>, rather than exporting a constant or variable. This function is executed by Next.js if no other metadata is found, and it receives the same data as the page component, including params. This allows for generating metadata based on dynamic data, such as a meal&#8217;s title and summary. However, if an invalid slug is entered, an error occurs because metadata generation fails when attempting to access properties on an undefined meal. To handle this, an if-check should be added to call a <code>notFound</code> function if the meal is not defined, ensuring the not-found page is displayed instead of an error.</p>
</div>
</div>
<div class="sect2">
<h3 id="_473_module_summary">473. Module Summary</h3>
<div class="paragraph">
<p>This section provided an in-depth exploration of NextJS, focusing on the App Router and how to set up routes using the file system with special file names like <code>page.js</code> and <code>layout.js</code>. It covered handling errors with <code>error.js</code> and <code>not-found.js</code>, and managing loading states with the loading JS file. The section emphasized the use of suspense for more granular control and configuring dynamic routes for unknown path segments, such as pages for individual meals. It explained that all pages export standard React components, which are special server components rendered on the server in NextJS. The concept of client components was introduced, highlighting the use of the <code>use client</code> directive for client-side functionality. The section discussed Server components and Server Actions for fetching data directly in components, and how to use these with form elements via the <code>action</code> prop and hooks like <code>useFormState</code> and <code>useFormStatus</code> for UI updates. It also covered NextJS&#8217;s aggressive caching and the importance of using <code>revalidatePath</code> to ensure data accuracy. The need to test apps in production mode was emphasized due to potential differences from development mode. Finally, metadata management for pages was discussed, providing a solid foundation to use NextJS with its App Router in future projects.</p>
</div>
</div>
<div class="sect2">
<h3 id="_474_about_the_nextjs_pages_router">474. About the NextJS Pages Router</h3>
<div class="paragraph">
<p>The content discusses the two routing approaches available in NextJS for building full-stack web applications with React: the App Router and the Pages Router. The App Router is the modern and recommended approach, while the Pages Router is the older, more stable method that was previously the only option. Despite the App Router being the future, the Pages Router is still relevant, especially for older projects. The NextJS documentation allows users to switch between these two versions to learn about both methods. The content advises learning about the Pages Router for its stability and relevance to existing projects, and it provides lectures on this approach for those interested.</p>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-01-18 22:55:19 +0200
</div>
</div>
</body>
</html>